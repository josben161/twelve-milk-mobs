{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.230.0"},"children":{"MilkMobsStack":{"id":"MilkMobsStack","path":"MilkMobsStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.230.0"},"children":{"UploadsBucket":{"id":"UploadsBucket","path":"MilkMobsStack/UploadsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/UploadsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"corsConfiguration":{"corsRules":[{"maxAge":3000,"allowedHeaders":["*"],"allowedMethods":["PUT","POST","HEAD"],"allowedOrigins":["*"],"exposedHeaders":["ETag","x-amz-server-side-encryption","x-amz-request-id","x-amz-id-2"]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"MilkMobsStack/UploadsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/UploadsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"UploadsBucket5E5E9B64"},"policyDocument":{"Statement":[{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["OAIE1EFC67F","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["OAIE1EFC67F","S3CanonicalUserId"]}},"Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"Notifications":{"id":"Notifications","path":"MilkMobsStack/UploadsBucket/Notifications","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/UploadsBucket/Notifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}}}},"AllowBucketNotificationsToMilkMobsStackStartAnalysisFn1E73624B":{"id":"AllowBucketNotificationsToMilkMobsStackStartAnalysisFn1E73624B","path":"MilkMobsStack/UploadsBucket/AllowBucketNotificationsToMilkMobsStackStartAnalysisFn1E73624B","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["StartAnalysisFn88339548","Arn"]},"principal":"s3.amazonaws.com","sourceAccount":"679729599398","sourceArn":{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]}}}}}},"OAI":{"id":"OAI","path":"MilkMobsStack/OAI","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/OAI/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"OAI for Milk Mobs video bucket"}}}}}},"VideoDistribution":{"id":"VideoDistribution","path":"MilkMobsStack/VideoDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.230.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"MilkMobsStack/VideoDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}},"Resource":{"id":"Resource","path":"MilkMobsStack/VideoDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["UploadsBucket5E5E9B64","RegionalDomainName"]},"id":"MilkMobsStackVideoDistributionOrigin18A5593E1","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"OAIE1EFC67F"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"MilkMobsStackVideoDistributionOrigin18A5593E1","allowedMethods":["GET","HEAD"],"cachedMethods":["GET","HEAD"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"comment":"CloudFront distribution for Milk Mobs video delivery","customErrorResponses":[{"errorCachingMinTtl":300,"errorCode":404,"responseCode":404,"responsePagePath":"/404.html"}],"defaultRootObject":"","httpVersion":"http2","ipv6Enabled":true},"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}}}},"VideosTable":{"id":"VideosTable","path":"MilkMobsStack/VideosTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/VideosTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"videoId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"videoId","keyType":"HASH"}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"ScalingRole":{"id":"ScalingRole","path":"MilkMobsStack/VideosTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}}}},"MobsTable":{"id":"MobsTable","path":"MilkMobsStack/MobsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MobsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"mobId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"mobId","keyType":"HASH"}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"ScalingRole":{"id":"ScalingRole","path":"MilkMobsStack/MobsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}}}},"VideoEmbeddingsDomain":{"id":"VideoEmbeddingsDomain","path":"MilkMobsStack/VideoEmbeddingsDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_opensearchservice.Domain","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/VideoEmbeddingsDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_opensearchservice.CfnDomain","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::OpenSearchService::Domain","aws:cdk:cloudformation:props":{"clusterConfig":{"dedicatedMasterEnabled":false,"instanceCount":1,"instanceType":"t3.small.search","zoneAwarenessEnabled":false},"domainEndpointOptions":{"enforceHttps":true,"tlsSecurityPolicy":"Policy-Min-TLS-1-2-2019-07"},"domainName":"milk-mobs-videos","ebsOptions":{"ebsEnabled":true,"volumeSize":20,"volumeType":"gp3"},"encryptionAtRestOptions":{"enabled":true},"engineVersion":"OpenSearch_2.3","logPublishingOptions":{},"nodeToNodeEncryptionOptions":{"enabled":true},"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"AccessPolicy":{"id":"AccessPolicy","path":"MilkMobsStack/VideoEmbeddingsDomain/AccessPolicy","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.AwsCustomResource","version":"2.230.0"},"children":{"Provider":{"id":"Provider","path":"MilkMobsStack/VideoEmbeddingsDomain/AccessPolicy/Provider","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/VideoEmbeddingsDomain/AccessPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.230.0","metadata":[]},"children":{"Default":{"id":"Default","path":"MilkMobsStack/VideoEmbeddingsDomain/AccessPolicy/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}}}},"CustomResourcePolicy":{"id":"CustomResourcePolicy","path":"MilkMobsStack/VideoEmbeddingsDomain/AccessPolicy/CustomResourcePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/VideoEmbeddingsDomain/AccessPolicy/CustomResourcePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"es:UpdateDomainConfig","Effect":"Allow","Resource":{"Fn::GetAtt":["VideoEmbeddingsDomain067A71F0","Arn"]}}],"Version":"2012-10-17"},"policyName":"VideoEmbeddingsDomainAccessPolicyCustomResourcePolicy7D3B0618","roles":[{"Ref":"AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"}]}}}}}}}}},"AWS679f53fac002430cb0da5b7982bd2287":{"id":"AWS679f53fac002430cb0da5b7982bd2287","path":"MilkMobsStack/AWS679f53fac002430cb0da5b7982bd2287","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}}}},"Code":{"id":"Code","path":"MilkMobsStack/AWS679f53fac002430cb0da5b7982bd2287/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/AWS679f53fac002430cb0da5b7982bd2287/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/AWS679f53fac002430cb0da5b7982bd2287/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/AWS679f53fac002430cb0da5b7982bd2287/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"bc8ef58951f4c88e641dd23090e9d2e2e61c7530a07960e767522941e959b625.zip"},"handler":"index.handler","role":{"Fn::GetAtt":["AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":120}}}}},"CreateOpenSearchIndexFn":{"id":"CreateOpenSearchIndexFn","path":"MilkMobsStack/CreateOpenSearchIndexFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/CreateOpenSearchIndexFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/CreateOpenSearchIndexFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/CreateOpenSearchIndexFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/CreateOpenSearchIndexFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/CreateOpenSearchIndexFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["es:ESHttpDelete","es:ESHttpPost","es:ESHttpPut","es:ESHttpPatch"],"Effect":"Allow","Resource":[{"Fn::Join":["",[{"Fn::GetAtt":["VideoEmbeddingsDomain067A71F0","Arn"]},"/videos"]]},{"Fn::Join":["",[{"Fn::GetAtt":["VideoEmbeddingsDomain067A71F0","Arn"]},"/videos/*"]]}]}],"Version":"2012-10-17"},"policyName":"CreateOpenSearchIndexFnServiceRoleDefaultPolicyD0A591D4","roles":[{"Ref":"CreateOpenSearchIndexFnServiceRole89B85C98"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/CreateOpenSearchIndexFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/CreateOpenSearchIndexFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/CreateOpenSearchIndexFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/CreateOpenSearchIndexFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"e46ea7b851caca85cdde368c1ee356561d1644fff51eb7c330ce5a11b40d3f28.zip"},"environment":{"variables":{"OPENSEARCH_ENDPOINT":{"Fn::GetAtt":["VideoEmbeddingsDomain067A71F0","DomainEndpoint"]},"OPENSEARCH_INDEX_NAME":"videos"}},"handler":"index.handler","role":{"Fn::GetAtt":["CreateOpenSearchIndexFnServiceRole89B85C98","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":120}}}}},"OpenSearchIndexProvider":{"id":"OpenSearchIndexProvider","path":"MilkMobsStack/OpenSearchIndexProvider","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.Provider","version":"2.230.0"},"children":{"framework-onEvent":{"id":"framework-onEvent","path":"MilkMobsStack/OpenSearchIndexProvider/framework-onEvent","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/OpenSearchIndexProvider/framework-onEvent/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/OpenSearchIndexProvider/framework-onEvent/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/OpenSearchIndexProvider/framework-onEvent/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/OpenSearchIndexProvider/framework-onEvent/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/OpenSearchIndexProvider/framework-onEvent/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["CreateOpenSearchIndexFn774C45A1","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["CreateOpenSearchIndexFn774C45A1","Arn"]},":*"]]}]},{"Action":"lambda:GetFunction","Effect":"Allow","Resource":{"Fn::GetAtt":["CreateOpenSearchIndexFn774C45A1","Arn"]}}],"Version":"2012-10-17"},"policyName":"OpenSearchIndexProviderframeworkonEventServiceRoleDefaultPolicy65067812","roles":[{"Ref":"OpenSearchIndexProviderframeworkonEventServiceRoleD694DE90"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/OpenSearchIndexProvider/framework-onEvent/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/OpenSearchIndexProvider/framework-onEvent/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/OpenSearchIndexProvider/framework-onEvent/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/OpenSearchIndexProvider/framework-onEvent/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"bdc104ed9cab1b5b6421713c8155f0b753380595356f710400609664d3635eca.zip"},"description":"AWS CDK resource provider framework - onEvent (MilkMobsStack/OpenSearchIndexProvider)","environment":{"variables":{"USER_ON_EVENT_FUNCTION_ARN":{"Fn::GetAtt":["CreateOpenSearchIndexFn774C45A1","Arn"]}}},"handler":"framework.onEvent","loggingConfig":{"logFormat":"JSON","applicationLogLevel":"FATAL"},"role":{"Fn::GetAtt":["OpenSearchIndexProviderframeworkonEventServiceRoleD694DE90","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":900}}}}}}},"OpenSearchIndex":{"id":"OpenSearchIndex","path":"MilkMobsStack/OpenSearchIndex","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.230.0","metadata":[]},"children":{"Default":{"id":"Default","path":"MilkMobsStack/OpenSearchIndex/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}}}},"CreateUploadFn":{"id":"CreateUploadFn","path":"MilkMobsStack/CreateUploadFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/CreateUploadFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/CreateUploadFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/CreateUploadFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/CreateUploadFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/CreateUploadFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}},{"Action":["dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}}],"Version":"2012-10-17"},"policyName":"CreateUploadFnServiceRoleDefaultPolicyEE185EA9","roles":[{"Ref":"CreateUploadFnServiceRole251FC044"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/CreateUploadFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/CreateUploadFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/CreateUploadFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/CreateUploadFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"eaaa82d6d7e7f541e984b72b6c9d2da75fd4aa926701b96ba0434dc378d0ca20.zip"},"environment":{"variables":{"UPLOADS_BUCKET_NAME":{"Ref":"UploadsBucket5E5E9B64"},"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"}}},"handler":"index.handler","role":{"Fn::GetAtt":["CreateUploadFnServiceRole251FC044","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":10}}}}},"ListUserVideosFn":{"id":"ListUserVideosFn","path":"MilkMobsStack/ListUserVideosFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/ListUserVideosFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/ListUserVideosFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/ListUserVideosFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/ListUserVideosFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/ListUserVideosFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}}],"Version":"2012-10-17"},"policyName":"ListUserVideosFnServiceRoleDefaultPolicy14C72D28","roles":[{"Ref":"ListUserVideosFnServiceRole216C1658"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/ListUserVideosFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/ListUserVideosFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/ListUserVideosFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/ListUserVideosFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"415669641b26a50d55cea36a71d4cd6013a0b4f11f52c4bbc57cfe43ce4f0ce8.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"},"CLOUDFRONT_DISTRIBUTION_DOMAIN":{"Fn::GetAtt":["VideoDistribution93465BBB","DomainName"]}}},"handler":"index.handler","role":{"Fn::GetAtt":["ListUserVideosFnServiceRole216C1658","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":10}}}}},"AnalysisMarkProcessingFn":{"id":"AnalysisMarkProcessingFn","path":"MilkMobsStack/AnalysisMarkProcessingFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/AnalysisMarkProcessingFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/AnalysisMarkProcessingFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisMarkProcessingFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/AnalysisMarkProcessingFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisMarkProcessingFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}}],"Version":"2012-10-17"},"policyName":"AnalysisMarkProcessingFnServiceRoleDefaultPolicyFB07D9A9","roles":[{"Ref":"AnalysisMarkProcessingFnServiceRole940C5341"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/AnalysisMarkProcessingFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/AnalysisMarkProcessingFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/AnalysisMarkProcessingFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisMarkProcessingFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"0112a5d4dd48909f7495ea2055c40da6cdb8e33920a05c7b3da2787bd48a5a06.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"}}},"handler":"index.handler","role":{"Fn::GetAtt":["AnalysisMarkProcessingFnServiceRole940C5341","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":30}}}}},"AnalysisPegasusFn":{"id":"AnalysisPegasusFn","path":"MilkMobsStack/AnalysisPegasusFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/AnalysisPegasusFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/AnalysisPegasusFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisPegasusFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/AnalysisPegasusFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisPegasusFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"bedrock:InvokeModel","Effect":"Allow","Resource":"arn:aws:bedrock:us-east-1::foundation-model/*"},{"Action":"cloudwatch:PutMetricData","Condition":{"StringEquals":{"cloudwatch:namespace":"MilkMobs/Bedrock"}},"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"AnalysisPegasusFnServiceRoleDefaultPolicyD1910F6B","roles":[{"Ref":"AnalysisPegasusFnServiceRoleD6E86B57"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/AnalysisPegasusFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/AnalysisPegasusFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/AnalysisPegasusFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisPegasusFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"b26da5c1b3cccc983c0740d61f9fc864bc849bb4ce3971704eedf6cd77b24f7e.zip"},"environment":{"variables":{"BEDROCK_REGION":"us-east-1","TWELVELABS_PEGASUS_MODEL_ID":""}},"handler":"index.handler","role":{"Fn::GetAtt":["AnalysisPegasusFnServiceRoleD6E86B57","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":300}}}}},"AnalysisMarengoFn":{"id":"AnalysisMarengoFn","path":"MilkMobsStack/AnalysisMarengoFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/AnalysisMarengoFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/AnalysisMarengoFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisMarengoFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/AnalysisMarengoFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisMarengoFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"bedrock:InvokeModel","Effect":"Allow","Resource":"arn:aws:bedrock:us-east-1::foundation-model/*"},{"Action":"cloudwatch:PutMetricData","Condition":{"StringEquals":{"cloudwatch:namespace":"MilkMobs/Bedrock"}},"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"AnalysisMarengoFnServiceRoleDefaultPolicyC454C6D6","roles":[{"Ref":"AnalysisMarengoFnServiceRole715EE6E9"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/AnalysisMarengoFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/AnalysisMarengoFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/AnalysisMarengoFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisMarengoFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"287425b66684f6ccb0e78555dd55e2ce8f368eee71924fdca9bedcbe3a0893dd.zip"},"environment":{"variables":{"BEDROCK_REGION":"us-east-1","TWELVELABS_MARENGO_MODEL_ID":""}},"handler":"index.handler","role":{"Fn::GetAtt":["AnalysisMarengoFnServiceRole715EE6E9","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":300}}}}},"AnalysisWriteResultFn":{"id":"AnalysisWriteResultFn","path":"MilkMobsStack/AnalysisWriteResultFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/AnalysisWriteResultFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/AnalysisWriteResultFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisWriteResultFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/AnalysisWriteResultFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisWriteResultFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["es:ESHttpDelete","es:ESHttpPost","es:ESHttpPut","es:ESHttpPatch"],"Effect":"Allow","Resource":[{"Fn::Join":["",[{"Fn::GetAtt":["VideoEmbeddingsDomain067A71F0","Arn"]},"/videos"]]},{"Fn::Join":["",[{"Fn::GetAtt":["VideoEmbeddingsDomain067A71F0","Arn"]},"/videos/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}}],"Version":"2012-10-17"},"policyName":"AnalysisWriteResultFnServiceRoleDefaultPolicy528B933B","roles":[{"Ref":"AnalysisWriteResultFnServiceRoleC6A2489F"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/AnalysisWriteResultFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/AnalysisWriteResultFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/AnalysisWriteResultFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisWriteResultFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"58a19e5daf301cec09cc47b9a35964795734b6c995a9a1c55203a53432e41f90.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"},"OPENSEARCH_ENDPOINT":{"Fn::GetAtt":["VideoEmbeddingsDomain067A71F0","DomainEndpoint"]},"OPENSEARCH_INDEX_NAME":"videos"}},"handler":"index.handler","role":{"Fn::GetAtt":["AnalysisWriteResultFnServiceRoleC6A2489F","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":30}}}}},"ValidateVideoFn":{"id":"ValidateVideoFn","path":"MilkMobsStack/ValidateVideoFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/ValidateVideoFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/ValidateVideoFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/ValidateVideoFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/ValidateVideoFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/ValidateVideoFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}}],"Version":"2012-10-17"},"policyName":"ValidateVideoFnServiceRoleDefaultPolicyEBF4EB71","roles":[{"Ref":"ValidateVideoFnServiceRole71BD5B19"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/ValidateVideoFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/ValidateVideoFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/ValidateVideoFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/ValidateVideoFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"483d68c40619e7f2697160f58e04b16f6252a8742aa22685feec581ee166dbdb.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"},"VALIDATION_THRESHOLD":"0.7"}},"handler":"index.handler","role":{"Fn::GetAtt":["ValidateVideoFnServiceRole71BD5B19","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":30}}}}},"StartAnalysisFn":{"id":"StartAnalysisFn","path":"MilkMobsStack/StartAnalysisFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/StartAnalysisFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/StartAnalysisFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/StartAnalysisFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/StartAnalysisFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/StartAnalysisFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Ref":"VideoAnalysisStateMachineA7892CAE"}},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["GenerateThumbnailFn2BBD94BA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["GenerateThumbnailFn2BBD94BA","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StartAnalysisFnServiceRoleDefaultPolicy455DEEBF","roles":[{"Ref":"StartAnalysisFnServiceRole90D56A70"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/StartAnalysisFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/StartAnalysisFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/StartAnalysisFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/StartAnalysisFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"0a48c672b579cc866c6dc7c5973356e7330b6a629eeb315e7585d7679d910ae2.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"},"STATE_MACHINE_ARN":{"Ref":"VideoAnalysisStateMachineA7892CAE"},"GENERATE_THUMBNAIL_FUNCTION_NAME":{"Ref":"GenerateThumbnailFn2BBD94BA"}}},"handler":"index.handler","role":{"Fn::GetAtt":["StartAnalysisFnServiceRole90D56A70","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":30}}}}},"FFmpegLayer":{"id":"FFmpegLayer","path":"MilkMobsStack/FFmpegLayer","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.LayerVersion","version":"2.230.0","metadata":[]},"children":{"Code":{"id":"Code","path":"MilkMobsStack/FFmpegLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/FFmpegLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/FFmpegLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/FFmpegLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"compatibleArchitectures":["x86_64"],"compatibleRuntimes":["nodejs20.x"],"content":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"d6d8fef993a7f71ed7ae4aeb3d86fdf023c8cd50c76f139ca2ee7f6896926103.zip"},"description":"FFmpeg static binary for video thumbnail generation"}}}}},"GenerateThumbnailFn":{"id":"GenerateThumbnailFn","path":"MilkMobsStack/GenerateThumbnailFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/GenerateThumbnailFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/GenerateThumbnailFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/GenerateThumbnailFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/GenerateThumbnailFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/GenerateThumbnailFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}}],"Version":"2012-10-17"},"policyName":"GenerateThumbnailFnServiceRoleDefaultPolicy1DD53BBA","roles":[{"Ref":"GenerateThumbnailFnServiceRole622C0FEF"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/GenerateThumbnailFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/GenerateThumbnailFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/GenerateThumbnailFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/GenerateThumbnailFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"88580df72685ef1b90d13d7f7873ca1bafa82cf894dded938384b4f9a6d07af9.zip"},"environment":{"variables":{"UPLOADS_BUCKET_NAME":{"Ref":"UploadsBucket5E5E9B64"},"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"},"CLOUDFRONT_DISTRIBUTION_DOMAIN":{"Fn::GetAtt":["VideoDistribution93465BBB","DomainName"]},"BUILD_TIMESTAMP":"2025-12-06T00:47:38.892Z"}},"handler":"index.handler","layers":[{"Ref":"FFmpegLayer65FCD2A8"}],"memorySize":1024,"role":{"Fn::GetAtt":["GenerateThumbnailFnServiceRole622C0FEF","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":300}}}}},"ClusterVideoFn":{"id":"ClusterVideoFn","path":"MilkMobsStack/ClusterVideoFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/ClusterVideoFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/ClusterVideoFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/ClusterVideoFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/ClusterVideoFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/ClusterVideoFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["MobsTableC49D34D5","Arn"]}}],"Version":"2012-10-17"},"policyName":"ClusterVideoFnServiceRoleDefaultPolicyDAFFA579","roles":[{"Ref":"ClusterVideoFnServiceRoleC7038455"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/ClusterVideoFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/ClusterVideoFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/ClusterVideoFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/ClusterVideoFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"38c7e0e94d6a152032cca9e075b700b4a60068f74138692fb59e7707cebe176c.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"},"MOBS_TABLE_NAME":{"Ref":"MobsTableC49D34D5"}}},"handler":"index.handler","role":{"Fn::GetAtt":["ClusterVideoFnServiceRoleC7038455","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":30}}}}},"GetVideoDetailFn":{"id":"GetVideoDetailFn","path":"MilkMobsStack/GetVideoDetailFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/GetVideoDetailFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/GetVideoDetailFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/GetVideoDetailFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/GetVideoDetailFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/GetVideoDetailFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}}],"Version":"2012-10-17"},"policyName":"GetVideoDetailFnServiceRoleDefaultPolicy38F3D09E","roles":[{"Ref":"GetVideoDetailFnServiceRole230300F7"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/GetVideoDetailFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/GetVideoDetailFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/GetVideoDetailFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/GetVideoDetailFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"105f091b30617adb86b94cdaa56904e60ab034905f45cdc4ffef8aed97c84772.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"},"UPLOADS_BUCKET_NAME":{"Ref":"UploadsBucket5E5E9B64"},"CLOUDFRONT_DISTRIBUTION_DOMAIN":{"Fn::GetAtt":["VideoDistribution93465BBB","DomainName"]}}},"handler":"index.handler","role":{"Fn::GetAtt":["GetVideoDetailFnServiceRole230300F7","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":10}}}}},"AdminListVideosFn":{"id":"AdminListVideosFn","path":"MilkMobsStack/AdminListVideosFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/AdminListVideosFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/AdminListVideosFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/AdminListVideosFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/AdminListVideosFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/AdminListVideosFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}}],"Version":"2012-10-17"},"policyName":"AdminListVideosFnServiceRoleDefaultPolicy56299FD5","roles":[{"Ref":"AdminListVideosFnServiceRole563BEDBF"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/AdminListVideosFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/AdminListVideosFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/AdminListVideosFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/AdminListVideosFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"1e62950a7bc6ec3a4f4ea1d9e5d84176c5961e70ec76c20c762eb2fc00606bf4.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"},"CLOUDFRONT_DISTRIBUTION_DOMAIN":{"Fn::GetAtt":["VideoDistribution93465BBB","DomainName"]}}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminListVideosFnServiceRole563BEDBF","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":10}}}}},"AdminGetStatsFn":{"id":"AdminGetStatsFn","path":"MilkMobsStack/AdminGetStatsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/AdminGetStatsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/AdminGetStatsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/AdminGetStatsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/AdminGetStatsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/AdminGetStatsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["MobsTableC49D34D5","Arn"]}}],"Version":"2012-10-17"},"policyName":"AdminGetStatsFnServiceRoleDefaultPolicy5A8F9825","roles":[{"Ref":"AdminGetStatsFnServiceRoleED0D776A"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/AdminGetStatsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/AdminGetStatsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/AdminGetStatsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/AdminGetStatsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"916113cd09708085d28ed2a9d64e7c817b6ace586542cdae4d6fb872de214d94.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"},"MOBS_TABLE_NAME":{"Ref":"MobsTableC49D34D5"}}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminGetStatsFnServiceRoleED0D776A","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":30}}}}},"AdminGetUsageStatsFn":{"id":"AdminGetUsageStatsFn","path":"MilkMobsStack/AdminGetUsageStatsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/AdminGetUsageStatsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/AdminGetUsageStatsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/AdminGetUsageStatsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/AdminGetUsageStatsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/AdminGetUsageStatsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cloudwatch:GetMetricData","cloudwatch:ListMetrics"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"AdminGetUsageStatsFnServiceRoleDefaultPolicy5E2C9C1B","roles":[{"Ref":"AdminGetUsageStatsFnServiceRole9C5A7419"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/AdminGetUsageStatsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/AdminGetUsageStatsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/AdminGetUsageStatsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/AdminGetUsageStatsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"5e9f790f220334156c11e544127ef53112b01f8ca480db8ace332785e2187b45.zip"},"environment":{"variables":{"STACK_NAME":"MilkMobsStack","TWELVELABS_PEGASUS_MODEL_ID":"","TWELVELABS_MARENGO_MODEL_ID":""}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminGetUsageStatsFnServiceRole9C5A7419","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":30}}}}},"AdminGetEmbeddingsFn":{"id":"AdminGetEmbeddingsFn","path":"MilkMobsStack/AdminGetEmbeddingsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/AdminGetEmbeddingsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/AdminGetEmbeddingsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/AdminGetEmbeddingsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/AdminGetEmbeddingsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/AdminGetEmbeddingsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}}],"Version":"2012-10-17"},"policyName":"AdminGetEmbeddingsFnServiceRoleDefaultPolicy5548C442","roles":[{"Ref":"AdminGetEmbeddingsFnServiceRole71B06BAD"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/AdminGetEmbeddingsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/AdminGetEmbeddingsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/AdminGetEmbeddingsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/AdminGetEmbeddingsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"d6fdb50f47f38b47d21da6f7c00c4de8b0cb52b81b1ed429f51b76e34af6c488.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"}}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["AdminGetEmbeddingsFnServiceRole71B06BAD","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":30}}}}},"AdminDeleteVideoFn":{"id":"AdminDeleteVideoFn","path":"MilkMobsStack/AdminDeleteVideoFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/AdminDeleteVideoFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/AdminDeleteVideoFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/AdminDeleteVideoFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/AdminDeleteVideoFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/AdminDeleteVideoFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}},{"Action":"s3:DeleteObject*","Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}}],"Version":"2012-10-17"},"policyName":"AdminDeleteVideoFnServiceRoleDefaultPolicy6B4EC453","roles":[{"Ref":"AdminDeleteVideoFnServiceRole3A09A598"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/AdminDeleteVideoFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/AdminDeleteVideoFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/AdminDeleteVideoFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/AdminDeleteVideoFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"7a4070ee45b6562cbc9d037ef961478e25987e911cdd177989b26bfc74b352c8.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"},"UPLOADS_BUCKET_NAME":{"Ref":"UploadsBucket5E5E9B64"}}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminDeleteVideoFnServiceRole3A09A598","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":30}}}}},"ListMobsFn":{"id":"ListMobsFn","path":"MilkMobsStack/ListMobsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/ListMobsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/ListMobsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/ListMobsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/ListMobsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/ListMobsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["MobsTableC49D34D5","Arn"]}}],"Version":"2012-10-17"},"policyName":"ListMobsFnServiceRoleDefaultPolicy806D424A","roles":[{"Ref":"ListMobsFnServiceRole1DEE32AB"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/ListMobsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/ListMobsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/ListMobsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/ListMobsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"f7a4d89b0d4d58266e21857f471c043c1b3171d4128e85fb97c55f626b27e9f2.zip"},"environment":{"variables":{"MOBS_TABLE_NAME":{"Ref":"MobsTableC49D34D5"}}},"handler":"index.handler","role":{"Fn::GetAtt":["ListMobsFnServiceRole1DEE32AB","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":10}}}}},"GetMobFn":{"id":"GetMobFn","path":"MilkMobsStack/GetMobFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/GetMobFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/GetMobFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/GetMobFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/GetMobFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/GetMobFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["MobsTableC49D34D5","Arn"]}}],"Version":"2012-10-17"},"policyName":"GetMobFnServiceRoleDefaultPolicy44FAB3F3","roles":[{"Ref":"GetMobFnServiceRole21BE82D4"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/GetMobFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/GetMobFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/GetMobFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/GetMobFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"598f16f7eba6780137fc3cdb1291966c033f6b0153d07950b9efe2beb33f0a80.zip"},"environment":{"variables":{"MOBS_TABLE_NAME":{"Ref":"MobsTableC49D34D5"},"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"}}},"handler":"index.handler","role":{"Fn::GetAtt":["GetMobFnServiceRole21BE82D4","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":10}}}}},"GetFeedFn":{"id":"GetFeedFn","path":"MilkMobsStack/GetFeedFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/GetFeedFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/GetFeedFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/GetFeedFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/GetFeedFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/GetFeedFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["MobsTableC49D34D5","Arn"]}}],"Version":"2012-10-17"},"policyName":"GetFeedFnServiceRoleDefaultPolicyFA1FB49A","roles":[{"Ref":"GetFeedFnServiceRole49452CD0"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/GetFeedFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/GetFeedFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/GetFeedFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/GetFeedFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"7f0903ba04e37a076ecc9f5d78b7a830e65cee903b39c1b010b4478db24917ea.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"},"MOBS_TABLE_NAME":{"Ref":"MobsTableC49D34D5"},"CLOUDFRONT_DISTRIBUTION_DOMAIN":{"Fn::GetAtt":["VideoDistribution93465BBB","DomainName"]}}},"handler":"index.handler","role":{"Fn::GetAtt":["GetFeedFnServiceRole49452CD0","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":10}}}}},"MilkMobsEventBus":{"id":"MilkMobsEventBus","path":"MilkMobsStack/MilkMobsEventBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsEventBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"name":"milk-mobs-bus"}}}}},"MarkProcessingTask":{"id":"MarkProcessingTask","path":"MilkMobsStack/MarkProcessingTask","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.230.0"}},"PegasusTask":{"id":"PegasusTask","path":"MilkMobsStack/PegasusTask","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.230.0"}},"MarengoTask":{"id":"MarengoTask","path":"MilkMobsStack/MarengoTask","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.230.0"}},"ParallelAnalysis":{"id":"ParallelAnalysis","path":"MilkMobsStack/ParallelAnalysis","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Parallel","version":"2.230.0"}},"MergeResults":{"id":"MergeResults","path":"MilkMobsStack/MergeResults","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.230.0"}},"WriteResultTask":{"id":"WriteResultTask","path":"MilkMobsStack/WriteResultTask","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.230.0"}},"ValidateTask":{"id":"ValidateTask","path":"MilkMobsStack/ValidateTask","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.230.0"}},"ClusterTask":{"id":"ClusterTask","path":"MilkMobsStack/ClusterTask","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.230.0"}},"EmitVideoAnalyzedEvent":{"id":"EmitVideoAnalyzedEvent","path":"MilkMobsStack/EmitVideoAnalyzedEvent","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.EventBridgePutEvents","version":"2.230.0"}},"VideoAnalysisStateMachine":{"id":"VideoAnalysisStateMachine","path":"MilkMobsStack/VideoAnalysisStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.230.0","metadata":[]},"children":{"Role":{"id":"Role","path":"MilkMobsStack/VideoAnalysisStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"MilkMobsStack/VideoAnalysisStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/VideoAnalysisStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/VideoAnalysisStateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/VideoAnalysisStateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["AnalysisMarkProcessingFn1DCE525A","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AnalysisMarkProcessingFn1DCE525A","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["AnalysisWriteResultFnC2A76429","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AnalysisWriteResultFnC2A76429","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ValidateVideoFn38264D58","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ValidateVideoFn38264D58","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ClusterVideoFnA18F77E1","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ClusterVideoFnA18F77E1","Arn"]},":*"]]}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["MilkMobsEventBus5827410E","Arn"]}},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["AnalysisPegasusFnA65D88A0","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AnalysisPegasusFnA65D88A0","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["AnalysisMarengoFnE7B906B8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AnalysisMarengoFnE7B906B8","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"VideoAnalysisStateMachineRoleDefaultPolicy2F1FF8F4","roles":[{"Ref":"VideoAnalysisStateMachineRole21C1D5B6"}]}}}}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/VideoAnalysisStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"MarkProcessingTask\",\"States\":{\"MarkProcessingTask\":{\"Next\":\"ParallelAnalysis\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["AnalysisMarkProcessingFn1DCE525A","Arn"]},"\",\"Payload.$\":\"$\"}},\"ParallelAnalysis\":{\"Type\":\"Parallel\",\"Comment\":\"Run Pegasus and Marengo analysis in parallel\",\"Next\":\"MergeResults\",\"Branches\":[{\"StartAt\":\"PegasusTask\",\"States\":{\"PegasusTask\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["AnalysisPegasusFnA65D88A0","Arn"]},"\",\"Payload.$\":\"$\"}}}},{\"StartAt\":\"MarengoTask\",\"States\":{\"MarengoTask\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["AnalysisMarengoFnE7B906B8","Arn"]},"\",\"Payload.$\":\"$\"}}}}]},\"MergeResults\":{\"Type\":\"Pass\",\"Parameters\":{\"videoId.$\":\"$[0].videoId\",\"s3Bucket.$\":\"$[0].s3Bucket\",\"s3Key.$\":\"$[0].s3Key\",\"hashtags.$\":\"$[0].hashtags\",\"participation.$\":\"$[0].participation\",\"embedding.$\":\"$[1].embedding\"},\"Next\":\"WriteResultTask\"},\"WriteResultTask\":{\"Next\":\"ValidateTask\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["AnalysisWriteResultFnC2A76429","Arn"]},"\",\"Payload.$\":\"$\"}},\"ValidateTask\":{\"Next\":\"ClusterTask\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["ValidateVideoFn38264D58","Arn"]},"\",\"Payload.$\":\"$\"}},\"ClusterTask\":{\"Next\":\"EmitVideoAnalyzedEvent\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["ClusterVideoFnA18F77E1","Arn"]},"\",\"Payload.$\":\"$\"}},\"EmitVideoAnalyzedEvent\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::events:putEvents\",\"Parameters\":{\"Entries\":[{\"Detail\":{\"videoId.$\":\"$.videoId\",\"status.$\":\"$.status\",\"participationScore.$\":\"$.participationScore\",\"validationScore.$\":\"$.validationScore\",\"mobId.$\":\"$.mobId\"},\"DetailType\":\"VideoAnalyzed\",\"EventBusName\":\"",{"Fn::GetAtt":["MilkMobsEventBus5827410E","Arn"]},"\",\"Source\":\"milk-mobs.analysis\"}]}}},\"TimeoutSeconds\":600,\"Comment\":\"Video analysis pipeline using Pegasus and Marengo\"}"]]},"roleArn":{"Fn::GetAtt":["VideoAnalysisStateMachineRole21C1D5B6","Arn"]},"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}}}},"GetExecutionHistoryFn":{"id":"GetExecutionHistoryFn","path":"MilkMobsStack/GetExecutionHistoryFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/GetExecutionHistoryFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/GetExecutionHistoryFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/GetExecutionHistoryFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/GetExecutionHistoryFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/GetExecutionHistoryFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["states:ListExecutions","states:DescribeExecution","states:GetExecutionHistory"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"GetExecutionHistoryFnServiceRoleDefaultPolicyCB3A8B2B","roles":[{"Ref":"GetExecutionHistoryFnServiceRole9F5657C6"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/GetExecutionHistoryFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/GetExecutionHistoryFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/GetExecutionHistoryFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/GetExecutionHistoryFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"2535119e5175d7386167db1b1735f2f211fa652b8a1cb357db1af57d057b4320.zip"},"environment":{"variables":{"STATE_MACHINE_ARN":{"Ref":"VideoAnalysisStateMachineA7892CAE"}}},"handler":"index.handler","role":{"Fn::GetAtt":["GetExecutionHistoryFnServiceRole9F5657C6","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":30}}}}},"BucketNotificationsHandler050a0587b7544547bf325f094a3db834":{"id":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834","path":"MilkMobsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Role":{"id":"Role","path":"MilkMobsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"MilkMobsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutBucketNotification","Effect":"Allow","Resource":{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]}}],"Version":"2012-10-17"},"policyName":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36","roles":[{"Ref":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"}]}}}}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}}}},"ClusterEmbeddingsFn":{"id":"ClusterEmbeddingsFn","path":"MilkMobsStack/ClusterEmbeddingsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/ClusterEmbeddingsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/ClusterEmbeddingsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/ClusterEmbeddingsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/ClusterEmbeddingsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/ClusterEmbeddingsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["MobsTableC49D34D5","Arn"]}}],"Version":"2012-10-17"},"policyName":"ClusterEmbeddingsFnServiceRoleDefaultPolicyB0282385","roles":[{"Ref":"ClusterEmbeddingsFnServiceRoleE3AD4487"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/ClusterEmbeddingsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/ClusterEmbeddingsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/ClusterEmbeddingsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/ClusterEmbeddingsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"7b5451c79bf8dcda147c550d9f3b1d1d9a7c09f0131843d11ff6729dd601543e.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"},"MOBS_TABLE_NAME":{"Ref":"MobsTableC49D34D5"}}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ClusterEmbeddingsFnServiceRoleE3AD4487","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":300}}}}},"ClusteringSchedule":{"id":"ClusteringSchedule","path":"MilkMobsStack/ClusteringSchedule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/ClusteringSchedule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"description":"Trigger batch clustering of video embeddings","scheduleExpression":"rate(1 hour)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["ClusterEmbeddingsFnF96ED85B","Arn"]}}]}}},"AllowEventRuleMilkMobsStackClusterEmbeddingsFnA7F1B5F8":{"id":"AllowEventRuleMilkMobsStackClusterEmbeddingsFnA7F1B5F8","path":"MilkMobsStack/ClusteringSchedule/AllowEventRuleMilkMobsStackClusterEmbeddingsFnA7F1B5F8","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ClusterEmbeddingsFnF96ED85B","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["ClusteringSchedule9F442E8C","Arn"]}}}}}},"MilkMobsApi":{"id":"MilkMobsApi","path":"MilkMobsStack/MilkMobsApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"name":"Milk Mobs API","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"MilkMobsStack/MilkMobsApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"MilkMobsStack/MilkMobsApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}}}},"Account":{"id":"Account","path":"MilkMobsStack/MilkMobsApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["MilkMobsApiCloudWatchRole9E515C93","Arn"]}}}},"Deployment":{"id":"Deployment","path":"MilkMobsStack/MilkMobsApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"MilkMobsStack/MilkMobsApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"MilkMobsApiDeployment87A47DF92cf89c3a2cad828f8ec7f88660df3c6a"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"},"stageName":"prod","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}}}},"Endpoint":{"id":"Endpoint","path":"MilkMobsStack/MilkMobsApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"Default":{"id":"Default","path":"MilkMobsStack/MilkMobsApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.230.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["MilkMobsApiB76DFE80","RootResourceId"]},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"videos":{"id":"videos","path":"MilkMobsStack/MilkMobsApi/Default/videos","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MilkMobsApiB76DFE80","RootResourceId"]},"pathPart":"videos","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/videos/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApivideosE506076B"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"submit":{"id":"submit","path":"MilkMobsStack/MilkMobsApi/Default/videos/submit","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/submit/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MilkMobsApivideosE506076B"},"pathPart":"submit","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/videos/submit/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/submit/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApivideossubmit533FD090"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"POST":{"id":"POST","path":"MilkMobsStack/MilkMobsApi/Default/videos/submit/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.POST..videos.submit":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.POST..videos.submit","path":"MilkMobsStack/MilkMobsApi/Default/videos/submit/POST/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.POST..videos.submit","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateUploadFnFC5660F7","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/POST/videos/submit"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.POST..videos.submit":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.POST..videos.submit","path":"MilkMobsStack/MilkMobsApi/Default/videos/submit/POST/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.POST..videos.submit","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateUploadFnFC5660F7","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/POST/videos/submit"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/submit/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CreateUploadFnFC5660F7","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApivideossubmit533FD090"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}}}},"user":{"id":"user","path":"MilkMobsStack/MilkMobsApi/Default/videos/user","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/user/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MilkMobsApivideosE506076B"},"pathPart":"user","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/videos/user/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/user/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApivideosuserEA56AC32"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"GET":{"id":"GET","path":"MilkMobsStack/MilkMobsApi/Default/videos/user/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.user":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.user","path":"MilkMobsStack/MilkMobsApi/Default/videos/user/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.user","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListUserVideosFn6B2F49BA","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/GET/videos/user"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.user":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.user","path":"MilkMobsStack/MilkMobsApi/Default/videos/user/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.user","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListUserVideosFn6B2F49BA","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/GET/videos/user"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/user/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ListUserVideosFn6B2F49BA","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApivideosuserEA56AC32"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}}}},"{videoId}":{"id":"{videoId}","path":"MilkMobsStack/MilkMobsApi/Default/videos/{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/{videoId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MilkMobsApivideosE506076B"},"pathPart":"{videoId}","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/videos/{videoId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/{videoId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApivideosvideoId87C65709"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"GET":{"id":"GET","path":"MilkMobsStack/MilkMobsApi/Default/videos/{videoId}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.{videoId}":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.{videoId}","path":"MilkMobsStack/MilkMobsApi/Default/videos/{videoId}/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetVideoDetailFn98896F83","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/GET/videos/*"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.{videoId}":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.{videoId}","path":"MilkMobsStack/MilkMobsApi/Default/videos/{videoId}/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetVideoDetailFn98896F83","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/GET/videos/*"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/{videoId}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetVideoDetailFn98896F83","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApivideosvideoId87C65709"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}}}},"feed":{"id":"feed","path":"MilkMobsStack/MilkMobsApi/Default/videos/feed","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/feed/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MilkMobsApivideosE506076B"},"pathPart":"feed","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/videos/feed/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/feed/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApivideosfeedD1A66EBF"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"GET":{"id":"GET","path":"MilkMobsStack/MilkMobsApi/Default/videos/feed/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.feed":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.feed","path":"MilkMobsStack/MilkMobsApi/Default/videos/feed/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.feed","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetFeedFnBF3919C0","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/GET/videos/feed"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.feed":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.feed","path":"MilkMobsStack/MilkMobsApi/Default/videos/feed/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.feed","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetFeedFnBF3919C0","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/GET/videos/feed"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/videos/feed/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetFeedFnBF3919C0","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApivideosfeedD1A66EBF"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}}}}}},"feed":{"id":"feed","path":"MilkMobsStack/MilkMobsApi/Default/feed","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/feed/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MilkMobsApiB76DFE80","RootResourceId"]},"pathPart":"feed","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/feed/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/feed/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApifeed1645A951"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"GET":{"id":"GET","path":"MilkMobsStack/MilkMobsApi/Default/feed/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..feed":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..feed","path":"MilkMobsStack/MilkMobsApi/Default/feed/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..feed","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetFeedFnBF3919C0","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/GET/feed"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..feed":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..feed","path":"MilkMobsStack/MilkMobsApi/Default/feed/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..feed","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetFeedFnBF3919C0","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/GET/feed"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/feed/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetFeedFnBF3919C0","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApifeed1645A951"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}}}},"admin":{"id":"admin","path":"MilkMobsStack/MilkMobsApi/Default/admin","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MilkMobsApiB76DFE80","RootResourceId"]},"pathPart":"admin","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/admin/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApiadminEFD758FD"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"videos":{"id":"videos","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MilkMobsApiadminEFD758FD"},"pathPart":"videos","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApiadminvideos77E8CFED"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"GET":{"id":"GET","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.videos":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.videos","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.videos","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminListVideosFn3DCC5AE5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/GET/admin/videos"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.videos":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.videos","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.videos","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminListVideosFn3DCC5AE5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/GET/admin/videos"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AdminListVideosFn3DCC5AE5","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApiadminvideos77E8CFED"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"{videoId}":{"id":"{videoId}","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/{videoId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MilkMobsApiadminvideos77E8CFED"},"pathPart":"{videoId}","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/{videoId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/{videoId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApiadminvideosvideoId1DBD90EB"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"DELETE":{"id":"DELETE","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/{videoId}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.DELETE..admin.videos.{videoId}":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.DELETE..admin.videos.{videoId}","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/{videoId}/DELETE/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.DELETE..admin.videos.{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminDeleteVideoFn5402F042","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/DELETE/admin/videos/*"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.DELETE..admin.videos.{videoId}":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.DELETE..admin.videos.{videoId}","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/{videoId}/DELETE/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.DELETE..admin.videos.{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminDeleteVideoFn5402F042","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/DELETE/admin/videos/*"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/videos/{videoId}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AdminDeleteVideoFn5402F042","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"},{"statusCode":"404"}],"resourceId":{"Ref":"MilkMobsApiadminvideosvideoId1DBD90EB"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}}}}}},"stats":{"id":"stats","path":"MilkMobsStack/MilkMobsApi/Default/admin/stats","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/stats/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MilkMobsApiadminEFD758FD"},"pathPart":"stats","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/admin/stats/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/stats/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApiadminstats3C76CDCD"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"GET":{"id":"GET","path":"MilkMobsStack/MilkMobsApi/Default/admin/stats/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.stats":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.stats","path":"MilkMobsStack/MilkMobsApi/Default/admin/stats/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.stats","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminGetStatsFnAC4350BC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/GET/admin/stats"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.stats":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.stats","path":"MilkMobsStack/MilkMobsApi/Default/admin/stats/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.stats","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminGetStatsFnAC4350BC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/GET/admin/stats"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/stats/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AdminGetStatsFnAC4350BC","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApiadminstats3C76CDCD"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}}}},"usage-stats":{"id":"usage-stats","path":"MilkMobsStack/MilkMobsApi/Default/admin/usage-stats","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/usage-stats/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MilkMobsApiadminEFD758FD"},"pathPart":"usage-stats","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/admin/usage-stats/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/usage-stats/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApiadminusagestatsC2FE397A"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"GET":{"id":"GET","path":"MilkMobsStack/MilkMobsApi/Default/admin/usage-stats/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.usage-stats":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.usage-stats","path":"MilkMobsStack/MilkMobsApi/Default/admin/usage-stats/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.usage-stats","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminGetUsageStatsFn60295C0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/GET/admin/usage-stats"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.usage-stats":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.usage-stats","path":"MilkMobsStack/MilkMobsApi/Default/admin/usage-stats/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.usage-stats","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminGetUsageStatsFn60295C0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/GET/admin/usage-stats"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/usage-stats/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AdminGetUsageStatsFn60295C0F","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApiadminusagestatsC2FE397A"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}}}},"embeddings":{"id":"embeddings","path":"MilkMobsStack/MilkMobsApi/Default/admin/embeddings","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/embeddings/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MilkMobsApiadminEFD758FD"},"pathPart":"embeddings","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/admin/embeddings/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/embeddings/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApiadminembeddingsFC669F9D"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"GET":{"id":"GET","path":"MilkMobsStack/MilkMobsApi/Default/admin/embeddings/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.embeddings":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.embeddings","path":"MilkMobsStack/MilkMobsApi/Default/admin/embeddings/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.embeddings","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminGetEmbeddingsFn69D21E5D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/GET/admin/embeddings"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.embeddings":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.embeddings","path":"MilkMobsStack/MilkMobsApi/Default/admin/embeddings/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.embeddings","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminGetEmbeddingsFn69D21E5D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/GET/admin/embeddings"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/admin/embeddings/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["AdminGetEmbeddingsFn69D21E5D","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApiadminembeddingsFC669F9D"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}}}}}},"mobs":{"id":"mobs","path":"MilkMobsStack/MilkMobsApi/Default/mobs","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/mobs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MilkMobsApiB76DFE80","RootResourceId"]},"pathPart":"mobs","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/mobs/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/mobs/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApimobsAA7D8C29"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"GET":{"id":"GET","path":"MilkMobsStack/MilkMobsApi/Default/mobs/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs","path":"MilkMobsStack/MilkMobsApi/Default/mobs/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListMobsFn0BE77E3A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/GET/mobs"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs","path":"MilkMobsStack/MilkMobsApi/Default/mobs/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListMobsFn0BE77E3A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/GET/mobs"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/mobs/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ListMobsFn0BE77E3A","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApimobsAA7D8C29"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"{mobId}":{"id":"{mobId}","path":"MilkMobsStack/MilkMobsApi/Default/mobs/{mobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/mobs/{mobId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MilkMobsApimobsAA7D8C29"},"pathPart":"{mobId}","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/mobs/{mobId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/mobs/{mobId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApimobsmobIdF0789012"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"GET":{"id":"GET","path":"MilkMobsStack/MilkMobsApi/Default/mobs/{mobId}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs.{mobId}":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs.{mobId}","path":"MilkMobsStack/MilkMobsApi/Default/mobs/{mobId}/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs.{mobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetMobFn1FB67C2C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/GET/mobs/*"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs.{mobId}":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs.{mobId}","path":"MilkMobsStack/MilkMobsApi/Default/mobs/{mobId}/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs.{mobId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetMobFn1FB67C2C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/GET/mobs/*"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/mobs/{mobId}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetMobFn1FB67C2C","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApimobsmobIdF0789012"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}}}}}},"search":{"id":"search","path":"MilkMobsStack/MilkMobsApi/Default/search","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/search/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MilkMobsApiB76DFE80","RootResourceId"]},"pathPart":"search","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/search/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/search/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApisearch587405B7"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"similar":{"id":"similar","path":"MilkMobsStack/MilkMobsApi/Default/search/similar","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/search/similar/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MilkMobsApisearch587405B7"},"pathPart":"similar","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/search/similar/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/search/similar/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApisearchsimilar1862FE4A"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"GET":{"id":"GET","path":"MilkMobsStack/MilkMobsApi/Default/search/similar/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..search.similar":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..search.similar","path":"MilkMobsStack/MilkMobsApi/Default/search/similar/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..search.similar","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SearchSimilarFn25B2FAE1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/GET/search/similar"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..search.similar":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..search.similar","path":"MilkMobsStack/MilkMobsApi/Default/search/similar/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..search.similar","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SearchSimilarFn25B2FAE1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/GET/search/similar"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/search/similar/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SearchSimilarFn25B2FAE1","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApisearchsimilar1862FE4A"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}}}}}},"validate":{"id":"validate","path":"MilkMobsStack/MilkMobsApi/Default/validate","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/validate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MilkMobsApiB76DFE80","RootResourceId"]},"pathPart":"validate","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/validate/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/validate/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApivalidateFD68B44A"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"POST":{"id":"POST","path":"MilkMobsStack/MilkMobsApi/Default/validate/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.POST..validate":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.POST..validate","path":"MilkMobsStack/MilkMobsApi/Default/validate/POST/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.POST..validate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ValidateVideoFn38264D58","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/POST/validate"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.POST..validate":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.POST..validate","path":"MilkMobsStack/MilkMobsApi/Default/validate/POST/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.POST..validate","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ValidateVideoFn38264D58","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/POST/validate"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/validate/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ValidateVideoFn38264D58","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApivalidateFD68B44A"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"{videoId}":{"id":"{videoId}","path":"MilkMobsStack/MilkMobsApi/Default/validate/{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/validate/{videoId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"MilkMobsApivalidateFD68B44A"},"pathPart":"{videoId}","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/validate/{videoId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/validate/{videoId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApivalidatevideoId1D263AB4"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"GET":{"id":"GET","path":"MilkMobsStack/MilkMobsApi/Default/validate/{videoId}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..validate.{videoId}":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..validate.{videoId}","path":"MilkMobsStack/MilkMobsApi/Default/validate/{videoId}/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..validate.{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ValidateVideoFn38264D58","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/GET/validate/*"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..validate.{videoId}":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..validate.{videoId}","path":"MilkMobsStack/MilkMobsApi/Default/validate/{videoId}/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..validate.{videoId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ValidateVideoFn38264D58","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/GET/validate/*"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/validate/{videoId}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ValidateVideoFn38264D58","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApivalidatevideoId1D263AB4"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}}}}}},"execution-history":{"id":"execution-history","path":"MilkMobsStack/MilkMobsApi/Default/execution-history","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/execution-history/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["MilkMobsApiB76DFE80","RootResourceId"]},"pathPart":"execution-history","restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}},"OPTIONS":{"id":"OPTIONS","path":"MilkMobsStack/MilkMobsApi/Default/execution-history/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/execution-history/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"MilkMobsApiexecutionhistory5F21AD6E"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}},"GET":{"id":"GET","path":"MilkMobsStack/MilkMobsApi/Default/execution-history/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..execution-history":{"id":"ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..execution-history","path":"MilkMobsStack/MilkMobsApi/Default/execution-history/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..execution-history","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetExecutionHistoryFnE73EB475","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/",{"Ref":"MilkMobsApiDeploymentStageprod1C57746E"},"/GET/execution-history"]]}}}},"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..execution-history":{"id":"ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..execution-history","path":"MilkMobsStack/MilkMobsApi/Default/execution-history/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..execution-history","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetExecutionHistoryFnE73EB475","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:679729599398:",{"Ref":"MilkMobsApiB76DFE80"},"/test-invoke-stage/GET/execution-history"]]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsApi/Default/execution-history/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetExecutionHistoryFnE73EB475","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200"}],"resourceId":{"Ref":"MilkMobsApiexecutionhistory5F21AD6E"},"restApiId":{"Ref":"MilkMobsApiB76DFE80"}}}}}}}}}}}},"SearchSimilarFn":{"id":"SearchSimilarFn","path":"MilkMobsStack/SearchSimilarFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MilkMobsStack/SearchSimilarFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MilkMobsStack/SearchSimilarFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"MilkMobsStack/SearchSimilarFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MilkMobsStack/SearchSimilarFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/SearchSimilarFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["es:ESHttpGet","es:ESHttpHead"],"Effect":"Allow","Resource":[{"Fn::Join":["",[{"Fn::GetAtt":["VideoEmbeddingsDomain067A71F0","Arn"]},"/videos"]]},{"Fn::Join":["",[{"Fn::GetAtt":["VideoEmbeddingsDomain067A71F0","Arn"]},"/videos/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VideosTable19B3D0C4","Arn"]}}],"Version":"2012-10-17"},"policyName":"SearchSimilarFnServiceRoleDefaultPolicy5789A8B3","roles":[{"Ref":"SearchSimilarFnServiceRoleFB263920"}]}}}}}}},"Code":{"id":"Code","path":"MilkMobsStack/SearchSimilarFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"MilkMobsStack/SearchSimilarFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"MilkMobsStack/SearchSimilarFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MilkMobsStack/SearchSimilarFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-679729599398-us-east-1","s3Key":"6c34d00577af490ce201b0e287016ead8ad74560d1c436558befd294afddc678.zip"},"environment":{"variables":{"VIDEOS_TABLE_NAME":{"Ref":"VideosTable19B3D0C4"},"OPENSEARCH_ENDPOINT":{"Fn::GetAtt":["VideoEmbeddingsDomain067A71F0","DomainEndpoint"]},"OPENSEARCH_INDEX_NAME":"videos"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["SearchSimilarFnServiceRoleFB263920","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"timeout":30}}}}},"ApiBaseUrl":{"id":"ApiBaseUrl","path":"MilkMobsStack/ApiBaseUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"UploadsBucketName":{"id":"UploadsBucketName","path":"MilkMobsStack/UploadsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"VideosTableName":{"id":"VideosTableName","path":"MilkMobsStack/VideosTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"MobsTableName":{"id":"MobsTableName","path":"MilkMobsStack/MobsTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"StateMachineArn":{"id":"StateMachineArn","path":"MilkMobsStack/StateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"EventBusName":{"id":"EventBusName","path":"MilkMobsStack/EventBusName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"CloudFrontDistributionDomain":{"id":"CloudFrontDistributionDomain","path":"MilkMobsStack/CloudFrontDistributionDomain","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"CloudFrontDistributionId":{"id":"CloudFrontDistributionId","path":"MilkMobsStack/CloudFrontDistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"OpenSearchEndpoint":{"id":"OpenSearchEndpoint","path":"MilkMobsStack/OpenSearchEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"MilkMobsDashboard":{"id":"MilkMobsDashboard","path":"MilkMobsStack/MilkMobsDashboard","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Dashboard","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/MilkMobsDashboard/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnDashboard","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Dashboard","aws:cdk:cloudformation:props":{"dashboardBody":{"Fn::Join":["",["{\"widgets\":[{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Analysis Lambda Invocations\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"AnalysisMarkProcessingFn1DCE525A"},"\",{\"label\":\"",{"Ref":"AnalysisMarkProcessingFn1DCE525A"},"\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"AnalysisPegasusFnA65D88A0"},"\",{\"label\":\"",{"Ref":"AnalysisPegasusFnA65D88A0"},"\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"AnalysisMarengoFnE7B906B8"},"\",{\"label\":\"",{"Ref":"AnalysisMarengoFnE7B906B8"},"\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"AnalysisWriteResultFnC2A76429"},"\",{\"label\":\"",{"Ref":"AnalysisWriteResultFnC2A76429"},"\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"ClusterEmbeddingsFnF96ED85B"},"\",{\"label\":\"",{"Ref":"ClusterEmbeddingsFnF96ED85B"},"\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"ValidateVideoFn38264D58"},"\",{\"label\":\"",{"Ref":"ValidateVideoFn38264D58"},"\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"SearchSimilarFn25B2FAE1"},"\",{\"label\":\"",{"Ref":"SearchSimilarFn25B2FAE1"},"\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Analysis Lambda Errors\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"AnalysisMarkProcessingFn1DCE525A"},"\",{\"label\":\"",{"Ref":"AnalysisMarkProcessingFn1DCE525A"},"\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"AnalysisPegasusFnA65D88A0"},"\",{\"label\":\"",{"Ref":"AnalysisPegasusFnA65D88A0"},"\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"AnalysisMarengoFnE7B906B8"},"\",{\"label\":\"",{"Ref":"AnalysisMarengoFnE7B906B8"},"\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"AnalysisWriteResultFnC2A76429"},"\",{\"label\":\"",{"Ref":"AnalysisWriteResultFnC2A76429"},"\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"ClusterEmbeddingsFnF96ED85B"},"\",{\"label\":\"",{"Ref":"ClusterEmbeddingsFnF96ED85B"},"\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"ValidateVideoFn38264D58"},"\",{\"label\":\"",{"Ref":"ValidateVideoFn38264D58"},"\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"SearchSimilarFn25B2FAE1"},"\",{\"label\":\"",{"Ref":"SearchSimilarFn25B2FAE1"},"\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":12,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Lambda Duration (ms)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"AnalysisMarkProcessingFn1DCE525A"},"\",{\"label\":\"",{"Ref":"AnalysisMarkProcessingFn1DCE525A"},"\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"AnalysisPegasusFnA65D88A0"},"\",{\"label\":\"",{"Ref":"AnalysisPegasusFnA65D88A0"},"\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"AnalysisMarengoFnE7B906B8"},"\",{\"label\":\"",{"Ref":"AnalysisMarengoFnE7B906B8"},"\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"AnalysisWriteResultFnC2A76429"},"\",{\"label\":\"",{"Ref":"AnalysisWriteResultFnC2A76429"},"\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"ClusterEmbeddingsFnF96ED85B"},"\",{\"label\":\"",{"Ref":"ClusterEmbeddingsFnF96ED85B"},"\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"ValidateVideoFn38264D58"},"\",{\"label\":\"",{"Ref":"ValidateVideoFn38264D58"},"\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"SearchSimilarFn25B2FAE1"},"\",{\"label\":\"",{"Ref":"SearchSimilarFn25B2FAE1"},"\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":18,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Step Functions Executions\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/States\",\"ExecutionsStarted\",\"StateMachineArn\",\"",{"Ref":"VideoAnalysisStateMachineA7892CAE"},"\",{\"label\":\"Total\",\"stat\":\"Sum\"}],[\"AWS/States\",\"ExecutionsFailed\",\"StateMachineArn\",\"",{"Ref":"VideoAnalysisStateMachineA7892CAE"},"\",{\"label\":\"Failed\",\"stat\":\"Sum\"}],[\"AWS/States\",\"ExecutionsSucceeded\",\"StateMachineArn\",\"",{"Ref":"VideoAnalysisStateMachineA7892CAE"},"\",{\"label\":\"Succeeded\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":24,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Step Functions Execution Time\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/States\",\"ExecutionTime\",\"StateMachineArn\",\"",{"Ref":"VideoAnalysisStateMachineA7892CAE"},"\",{\"label\":\"Avg Execution Time\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":30,\"properties\":{\"view\":\"timeSeries\",\"title\":\"DynamoDB Read/Write Capacity\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/DynamoDB\",\"ConsumedReadCapacityUnits\",\"TableName\",\"",{"Ref":"VideosTable19B3D0C4"},"\",{\"label\":\"Videos Read\",\"stat\":\"Sum\"}],[\"AWS/DynamoDB\",\"ConsumedWriteCapacityUnits\",\"TableName\",\"",{"Ref":"VideosTable19B3D0C4"},"\",{\"label\":\"Videos Write\",\"stat\":\"Sum\"}],[\"AWS/DynamoDB\",\"ConsumedReadCapacityUnits\",\"TableName\",\"",{"Ref":"MobsTableC49D34D5"},"\",{\"label\":\"Mobs Read\",\"stat\":\"Sum\"}],[\"AWS/DynamoDB\",\"ConsumedWriteCapacityUnits\",\"TableName\",\"",{"Ref":"MobsTableC49D34D5"},"\",{\"label\":\"Mobs Write\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":36,\"properties\":{\"view\":\"timeSeries\",\"title\":\"S3 Bucket Size\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/S3\",\"BucketSizeBytes\",\"BucketName\",\"",{"Ref":"UploadsBucket5E5E9B64"},"\",\"StorageType\",\"StandardStorage\",{\"label\":\"Uploads Bucket Size\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":42,\"properties\":{\"view\":\"timeSeries\",\"title\":\"API Gateway Requests\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/ApiGateway\",\"Count\",\"ApiName\",\"Milk Mobs API\",{\"label\":\"Total Requests\",\"stat\":\"Sum\"}],[\"AWS/ApiGateway\",\"4XXError\",\"ApiName\",\"Milk Mobs API\",{\"label\":\"4XX Errors\",\"stat\":\"Sum\"}],[\"AWS/ApiGateway\",\"5XXError\",\"ApiName\",\"Milk Mobs API\",{\"label\":\"5XX Errors\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":48,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Bedrock Usage (TwelveLabs)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"MilkMobs/Bedrock\",\"BedrockInvocations\",\"ModelType\",\"Pegasus\",{\"label\":\"Pegasus Invocations\",\"stat\":\"Sum\"}],[\"MilkMobs/Bedrock\",\"BedrockInvocations\",\"ModelType\",\"Marengo\",{\"label\":\"Marengo Invocations\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":54,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Bedrock Token Usage\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"MilkMobs/Bedrock\",\"BedrockInputTokens\",\"ModelType\",\"Pegasus\",{\"label\":\"Pegasus Input Tokens\",\"stat\":\"Sum\"}],[\"MilkMobs/Bedrock\",\"BedrockOutputTokens\",\"ModelType\",\"Pegasus\",{\"label\":\"Pegasus Output Tokens\",\"stat\":\"Sum\"}],[\"MilkMobs/Bedrock\",\"BedrockInputTokens\",\"ModelType\",\"Marengo\",{\"label\":\"Marengo Input Tokens\",\"stat\":\"Sum\"}],[\"MilkMobs/Bedrock\",\"BedrockOutputTokens\",\"ModelType\",\"Marengo\",{\"label\":\"Marengo Output Tokens\",\"stat\":\"Sum\"}]],\"yAxis\":{}}}]}"]]},"dashboardName":"MilkMobsSystemHealth"}}}}},"StepFunctionsHighFailureRate":{"id":"StepFunctionsHighFailureRate","path":"MilkMobsStack/StepFunctionsHighFailureRate","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/StepFunctionsHighFailureRate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Step Functions failure rate exceeds 5%","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","evaluationPeriods":1,"metrics":[{"expression":"(failed / started) * 100","id":"expr_1","returnData":true},{"metricStat":{"metric":{"metricName":"ExecutionsFailed","namespace":"AWS/States","dimensions":[{"name":"StateMachineArn","value":{"Ref":"VideoAnalysisStateMachineA7892CAE"}}]},"period":300,"stat":"Sum"},"id":"failed","returnData":false},{"metricStat":{"metric":{"metricName":"ExecutionsStarted","namespace":"AWS/States","dimensions":[{"name":"StateMachineArn","value":{"Ref":"VideoAnalysisStateMachineA7892CAE"}}]},"period":300,"stat":"Sum"},"id":"started","returnData":false}],"threshold":5,"treatMissingData":"notBreaching"}}}}},"LambdaHighErrorRate":{"id":"LambdaHighErrorRate","path":"MilkMobsStack/LambdaHighErrorRate","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/LambdaHighErrorRate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Lambda error rate exceeds 10%","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","evaluationPeriods":1,"metrics":[{"expression":"(errors / invocations) * 100","id":"expr_1","returnData":true},{"metricStat":{"metric":{"metricName":"Errors","namespace":"AWS/Lambda"},"period":300,"stat":"Sum"},"id":"errors","returnData":false},{"metricStat":{"metric":{"metricName":"Invocations","namespace":"AWS/Lambda"},"period":300,"stat":"Sum"},"id":"invocations","returnData":false}],"threshold":10,"treatMissingData":"notBreaching"}}}}},"AnalysisPegasusErrors":{"id":"AnalysisPegasusErrors","path":"MilkMobsStack/AnalysisPegasusErrors","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisPegasusErrors/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Analysis Pegasus Lambda has errors","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"AnalysisPegasusFnA65D88A0"}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":3,"treatMissingData":"notBreaching"}}}}},"AnalysisMarengoErrors":{"id":"AnalysisMarengoErrors","path":"MilkMobsStack/AnalysisMarengoErrors","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MilkMobsStack/AnalysisMarengoErrors/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Analysis Marengo Lambda has errors","tags":[{"key":"Application","value":"MilkMobs"},{"key":"CostCenter","value":"Marketing"},{"key":"Environment","value":"prod"},{"key":"ManagedBy","value":"CDK"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"AnalysisMarengoFnE7B906B8"}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":3,"treatMissingData":"notBreaching"}}}}},"DashboardUrl":{"id":"DashboardUrl","path":"MilkMobsStack/DashboardUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"MilkMobsStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"MilkMobsStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MilkMobsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.230.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MilkMobsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.230.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}