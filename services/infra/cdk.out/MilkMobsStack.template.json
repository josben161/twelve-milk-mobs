{
 "Resources": {
  "UploadsBucket5E5E9B64": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "CorsConfiguration": {
     "CorsRules": [
      {
       "AllowedHeaders": [
        "*"
       ],
       "AllowedMethods": [
        "PUT",
        "POST",
        "HEAD"
       ],
       "AllowedOrigins": [
        "*"
       ],
       "ExposedHeaders": [
        "ETag",
        "x-amz-server-side-encryption",
        "x-amz-request-id",
        "x-amz-id-2"
       ],
       "MaxAge": 3000
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/UploadsBucket/Resource"
   }
  },
  "UploadsBucketPolicy34A32B0B": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "UploadsBucket5E5E9B64"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:GetObject",
       "Effect": "Allow",
       "Principal": {
        "CanonicalUser": {
         "Fn::GetAtt": [
          "OAIE1EFC67F",
          "S3CanonicalUserId"
         ]
        }
       },
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::GetAtt": [
            "UploadsBucket5E5E9B64",
            "Arn"
           ]
          },
          "/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Principal": {
        "CanonicalUser": {
         "Fn::GetAtt": [
          "OAIE1EFC67F",
          "S3CanonicalUserId"
         ]
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "UploadsBucket5E5E9B64",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "UploadsBucket5E5E9B64",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/UploadsBucket/Policy/Resource"
   }
  },
  "UploadsBucketNotifications4592A072": {
   "Type": "Custom::S3BucketNotifications",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "BucketNotificationsHandler050a0587b7544547bf325f094a3db8347ECC3691",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "UploadsBucket5E5E9B64"
    },
    "NotificationConfiguration": {
     "LambdaFunctionConfigurations": [
      {
       "Events": [
        "s3:ObjectCreated:*"
       ],
       "Filter": {
        "Key": {
         "FilterRules": [
          {
           "Name": "suffix",
           "Value": ".mp4"
          },
          {
           "Name": "prefix",
           "Value": "vid_"
          }
         ]
        }
       },
       "LambdaFunctionArn": {
        "Fn::GetAtt": [
         "StartAnalysisFn88339548",
         "Arn"
        ]
       }
      }
     ]
    },
    "Managed": true,
    "SkipDestinationValidation": false
   },
   "DependsOn": [
    "UploadsBucketAllowBucketNotificationsToMilkMobsStackStartAnalysisFn1E73624BB3C32EE3",
    "UploadsBucketPolicy34A32B0B"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/UploadsBucket/Notifications/Resource"
   }
  },
  "UploadsBucketAllowBucketNotificationsToMilkMobsStackStartAnalysisFn1E73624BB3C32EE3": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "StartAnalysisFn88339548",
      "Arn"
     ]
    },
    "Principal": "s3.amazonaws.com",
    "SourceAccount": "679729599398",
    "SourceArn": {
     "Fn::GetAtt": [
      "UploadsBucket5E5E9B64",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/UploadsBucket/AllowBucketNotificationsToMilkMobsStackStartAnalysisFn1E73624B"
   }
  },
  "OAIE1EFC67F": {
   "Type": "AWS::CloudFront::CloudFrontOriginAccessIdentity",
   "Properties": {
    "CloudFrontOriginAccessIdentityConfig": {
     "Comment": "OAI for Milk Mobs video bucket"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/OAI/Resource"
   }
  },
  "VideoDistribution93465BBB": {
   "Type": "AWS::CloudFront::Distribution",
   "Properties": {
    "DistributionConfig": {
     "Comment": "CloudFront distribution for Milk Mobs video delivery",
     "CustomErrorResponses": [
      {
       "ErrorCachingMinTTL": 300,
       "ErrorCode": 404,
       "ResponseCode": 404,
       "ResponsePagePath": "/404.html"
      }
     ],
     "DefaultCacheBehavior": {
      "AllowedMethods": [
       "GET",
       "HEAD"
      ],
      "CachePolicyId": "658327ea-f89d-4fab-a63d-7e88639e58f6",
      "CachedMethods": [
       "GET",
       "HEAD"
      ],
      "Compress": true,
      "TargetOriginId": "MilkMobsStackVideoDistributionOrigin18A5593E1",
      "ViewerProtocolPolicy": "redirect-to-https"
     },
     "DefaultRootObject": "",
     "Enabled": true,
     "HttpVersion": "http2",
     "IPV6Enabled": true,
     "Origins": [
      {
       "DomainName": {
        "Fn::GetAtt": [
         "UploadsBucket5E5E9B64",
         "RegionalDomainName"
        ]
       },
       "Id": "MilkMobsStackVideoDistributionOrigin18A5593E1",
       "S3OriginConfig": {
        "OriginAccessIdentity": {
         "Fn::Join": [
          "",
          [
           "origin-access-identity/cloudfront/",
           {
            "Ref": "OAIE1EFC67F"
           }
          ]
         ]
        }
       }
      }
     ]
    },
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/VideoDistribution/Resource"
   }
  },
  "VideosTable19B3D0C4": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "videoId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "videoId",
      "KeyType": "HASH"
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/VideosTable/Resource"
   }
  },
  "MobsTableC49D34D5": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "mobId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "mobId",
      "KeyType": "HASH"
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MobsTable/Resource"
   }
  },
  "VideoEmbeddingsDomain067A71F0": {
   "Type": "AWS::OpenSearchService::Domain",
   "Properties": {
    "ClusterConfig": {
     "DedicatedMasterEnabled": false,
     "InstanceCount": 1,
     "InstanceType": "t3.small.search",
     "ZoneAwarenessEnabled": false
    },
    "DomainEndpointOptions": {
     "EnforceHTTPS": true,
     "TLSSecurityPolicy": "Policy-Min-TLS-1-2-2019-07"
    },
    "DomainName": "milk-mobs-videos",
    "EBSOptions": {
     "EBSEnabled": true,
     "VolumeSize": 20,
     "VolumeType": "gp3"
    },
    "EncryptionAtRestOptions": {
     "Enabled": true
    },
    "EngineVersion": "OpenSearch_2.3",
    "LogPublishingOptions": {},
    "NodeToNodeEncryptionOptions": {
     "Enabled": true
    },
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/VideoEmbeddingsDomain/Resource"
   }
  },
  "VideoEmbeddingsDomainAccessPolicyBD06A7D5": {
   "Type": "Custom::OpenSearchAccessPolicy",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "AWS679f53fac002430cb0da5b7982bd22872D164C4C",
      "Arn"
     ]
    },
    "Create": {
     "Fn::Join": [
      "",
      [
       "{\"action\":\"updateDomainConfig\",\"service\":\"OpenSearch\",\"parameters\":{\"DomainName\":\"",
       {
        "Ref": "VideoEmbeddingsDomain067A71F0"
       },
       "\",\"AccessPolicies\":\"{\\\"Statement\\\":[{\\\"Action\\\":[\\\"es:ESHttpPost\\\",\\\"es:ESHttpPut\\\",\\\"es:ESHttpGet\\\"],\\\"Effect\\\":\\\"Allow\\\",\\\"Principal\\\":{\\\"Service\\\":\\\"lambda.amazonaws.com\\\"},\\\"Resource\\\":\\\"*\\\"}],\\\"Version\\\":\\\"2012-10-17\\\"}\"},\"outputPaths\":[\"DomainConfig.AccessPolicies\"],\"physicalResourceId\":{\"id\":\"",
       {
        "Ref": "VideoEmbeddingsDomain067A71F0"
       },
       "AccessPolicy\"}}"
      ]
     ]
    },
    "Update": {
     "Fn::Join": [
      "",
      [
       "{\"action\":\"updateDomainConfig\",\"service\":\"OpenSearch\",\"parameters\":{\"DomainName\":\"",
       {
        "Ref": "VideoEmbeddingsDomain067A71F0"
       },
       "\",\"AccessPolicies\":\"{\\\"Statement\\\":[{\\\"Action\\\":[\\\"es:ESHttpPost\\\",\\\"es:ESHttpPut\\\",\\\"es:ESHttpGet\\\"],\\\"Effect\\\":\\\"Allow\\\",\\\"Principal\\\":{\\\"Service\\\":\\\"lambda.amazonaws.com\\\"},\\\"Resource\\\":\\\"*\\\"}],\\\"Version\\\":\\\"2012-10-17\\\"}\"},\"outputPaths\":[\"DomainConfig.AccessPolicies\"],\"physicalResourceId\":{\"id\":\"",
       {
        "Ref": "VideoEmbeddingsDomain067A71F0"
       },
       "AccessPolicy\"}}"
      ]
     ]
    },
    "InstallLatestAwsSdk": false
   },
   "DependsOn": [
    "VideoEmbeddingsDomainAccessPolicyCustomResourcePolicy7D3B0618"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/VideoEmbeddingsDomain/AccessPolicy/Resource/Default"
   }
  },
  "VideoEmbeddingsDomainAccessPolicyCustomResourcePolicy7D3B0618": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "es:UpdateDomainConfig",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideoEmbeddingsDomain067A71F0",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "VideoEmbeddingsDomainAccessPolicyCustomResourcePolicy7D3B0618",
    "Roles": [
     {
      "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/VideoEmbeddingsDomain/AccessPolicy/CustomResourcePolicy/Resource"
   }
  },
  "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/Resource"
   }
  },
  "AWS679f53fac002430cb0da5b7982bd22872D164C4C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "bc8ef58951f4c88e641dd23090e9d2e2e61c7530a07960e767522941e959b625.zip"
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
      "Arn"
     ]
    },
    "Runtime": "nodejs22.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 120
   },
   "DependsOn": [
    "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AWS679f53fac002430cb0da5b7982bd2287/Resource",
    "aws:asset:path": "asset.bc8ef58951f4c88e641dd23090e9d2e2e61c7530a07960e767522941e959b625",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "CreateOpenSearchIndexFnServiceRole89B85C98": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/CreateOpenSearchIndexFn/ServiceRole/Resource"
   }
  },
  "CreateOpenSearchIndexFnServiceRoleDefaultPolicyD0A591D4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "es:ESHttpDelete",
        "es:ESHttpPost",
        "es:ESHttpPut",
        "es:ESHttpPatch"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "VideoEmbeddingsDomain067A71F0",
             "Arn"
            ]
           },
           "/videos"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "VideoEmbeddingsDomain067A71F0",
             "Arn"
            ]
           },
           "/videos/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateOpenSearchIndexFnServiceRoleDefaultPolicyD0A591D4",
    "Roles": [
     {
      "Ref": "CreateOpenSearchIndexFnServiceRole89B85C98"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/CreateOpenSearchIndexFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CreateOpenSearchIndexFn774C45A1": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "e46ea7b851caca85cdde368c1ee356561d1644fff51eb7c330ce5a11b40d3f28.zip"
    },
    "Environment": {
     "Variables": {
      "OPENSEARCH_ENDPOINT": {
       "Fn::GetAtt": [
        "VideoEmbeddingsDomain067A71F0",
        "DomainEndpoint"
       ]
      },
      "OPENSEARCH_INDEX_NAME": "videos"
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "CreateOpenSearchIndexFnServiceRole89B85C98",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 120
   },
   "DependsOn": [
    "CreateOpenSearchIndexFnServiceRoleDefaultPolicyD0A591D4",
    "CreateOpenSearchIndexFnServiceRole89B85C98"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/CreateOpenSearchIndexFn/Resource",
    "aws:asset:path": "asset.e46ea7b851caca85cdde368c1ee356561d1644fff51eb7c330ce5a11b40d3f28",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "OpenSearchIndexProviderframeworkonEventServiceRoleD694DE90": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/OpenSearchIndexProvider/framework-onEvent/ServiceRole/Resource"
   }
  },
  "OpenSearchIndexProviderframeworkonEventServiceRoleDefaultPolicy65067812": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "CreateOpenSearchIndexFn774C45A1",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "CreateOpenSearchIndexFn774C45A1",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:GetFunction",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CreateOpenSearchIndexFn774C45A1",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "OpenSearchIndexProviderframeworkonEventServiceRoleDefaultPolicy65067812",
    "Roles": [
     {
      "Ref": "OpenSearchIndexProviderframeworkonEventServiceRoleD694DE90"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/OpenSearchIndexProvider/framework-onEvent/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "OpenSearchIndexProviderframeworkonEventEA6608F3": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "bdc104ed9cab1b5b6421713c8155f0b753380595356f710400609664d3635eca.zip"
    },
    "Description": "AWS CDK resource provider framework - onEvent (MilkMobsStack/OpenSearchIndexProvider)",
    "Environment": {
     "Variables": {
      "USER_ON_EVENT_FUNCTION_ARN": {
       "Fn::GetAtt": [
        "CreateOpenSearchIndexFn774C45A1",
        "Arn"
       ]
      }
     }
    },
    "Handler": "framework.onEvent",
    "LoggingConfig": {
     "ApplicationLogLevel": "FATAL",
     "LogFormat": "JSON"
    },
    "Role": {
     "Fn::GetAtt": [
      "OpenSearchIndexProviderframeworkonEventServiceRoleD694DE90",
      "Arn"
     ]
    },
    "Runtime": "nodejs22.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 900
   },
   "DependsOn": [
    "OpenSearchIndexProviderframeworkonEventServiceRoleDefaultPolicy65067812",
    "OpenSearchIndexProviderframeworkonEventServiceRoleD694DE90"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/OpenSearchIndexProvider/framework-onEvent/Resource",
    "aws:asset:path": "asset.bdc104ed9cab1b5b6421713c8155f0b753380595356f710400609664d3635eca",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "OpenSearchIndex": {
   "Type": "AWS::CloudFormation::CustomResource",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "OpenSearchIndexProviderframeworkonEventEA6608F3",
      "Arn"
     ]
    },
    "IndexName": "videos"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/OpenSearchIndex/Default"
   }
  },
  "CreateUploadFnServiceRole251FC044": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/CreateUploadFn/ServiceRole/Resource"
   }
  },
  "CreateUploadFnServiceRoleDefaultPolicyEE185EA9": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::GetAtt": [
            "UploadsBucket5E5E9B64",
            "Arn"
           ]
          },
          "/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateUploadFnServiceRoleDefaultPolicyEE185EA9",
    "Roles": [
     {
      "Ref": "CreateUploadFnServiceRole251FC044"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/CreateUploadFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CreateUploadFnFC5660F7": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "eaaa82d6d7e7f541e984b72b6c9d2da75fd4aa926701b96ba0434dc378d0ca20.zip"
    },
    "Environment": {
     "Variables": {
      "UPLOADS_BUCKET_NAME": {
       "Ref": "UploadsBucket5E5E9B64"
      },
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "CreateUploadFnServiceRole251FC044",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 10
   },
   "DependsOn": [
    "CreateUploadFnServiceRoleDefaultPolicyEE185EA9",
    "CreateUploadFnServiceRole251FC044"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/CreateUploadFn/Resource",
    "aws:asset:path": "asset.eaaa82d6d7e7f541e984b72b6c9d2da75fd4aa926701b96ba0434dc378d0ca20",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ListUserVideosFnServiceRole216C1658": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ListUserVideosFn/ServiceRole/Resource"
   }
  },
  "ListUserVideosFnServiceRoleDefaultPolicy14C72D28": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListUserVideosFnServiceRoleDefaultPolicy14C72D28",
    "Roles": [
     {
      "Ref": "ListUserVideosFnServiceRole216C1658"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ListUserVideosFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ListUserVideosFn6B2F49BA": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "415669641b26a50d55cea36a71d4cd6013a0b4f11f52c4bbc57cfe43ce4f0ce8.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      },
      "CLOUDFRONT_DISTRIBUTION_DOMAIN": {
       "Fn::GetAtt": [
        "VideoDistribution93465BBB",
        "DomainName"
       ]
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "ListUserVideosFnServiceRole216C1658",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 10
   },
   "DependsOn": [
    "ListUserVideosFnServiceRoleDefaultPolicy14C72D28",
    "ListUserVideosFnServiceRole216C1658"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ListUserVideosFn/Resource",
    "aws:asset:path": "asset.415669641b26a50d55cea36a71d4cd6013a0b4f11f52c4bbc57cfe43ce4f0ce8",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "AnalysisMarkProcessingFnServiceRole940C5341": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisMarkProcessingFn/ServiceRole/Resource"
   }
  },
  "AnalysisMarkProcessingFnServiceRoleDefaultPolicyFB07D9A9": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AnalysisMarkProcessingFnServiceRoleDefaultPolicyFB07D9A9",
    "Roles": [
     {
      "Ref": "AnalysisMarkProcessingFnServiceRole940C5341"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisMarkProcessingFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AnalysisMarkProcessingFn1DCE525A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "0112a5d4dd48909f7495ea2055c40da6cdb8e33920a05c7b3da2787bd48a5a06.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "AnalysisMarkProcessingFnServiceRole940C5341",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "AnalysisMarkProcessingFnServiceRoleDefaultPolicyFB07D9A9",
    "AnalysisMarkProcessingFnServiceRole940C5341"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisMarkProcessingFn/Resource",
    "aws:asset:path": "asset.0112a5d4dd48909f7495ea2055c40da6cdb8e33920a05c7b3da2787bd48a5a06",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "AnalysisPegasusFnServiceRoleD6E86B57": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisPegasusFn/ServiceRole/Resource"
   }
  },
  "AnalysisPegasusFnServiceRoleDefaultPolicyD1910F6B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "bedrock:InvokeModel",
       "Effect": "Allow",
       "Resource": "arn:aws:bedrock:us-east-1::foundation-model/*"
      },
      {
       "Action": "cloudwatch:PutMetricData",
       "Condition": {
        "StringEquals": {
         "cloudwatch:namespace": "MilkMobs/Bedrock"
        }
       },
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AnalysisPegasusFnServiceRoleDefaultPolicyD1910F6B",
    "Roles": [
     {
      "Ref": "AnalysisPegasusFnServiceRoleD6E86B57"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisPegasusFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AnalysisPegasusFnA65D88A0": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "2053f255ed6e403977fcbc30e32ad8757cb204d64e7c84deb62216f96ee4834f.zip"
    },
    "Environment": {
     "Variables": {
      "BEDROCK_REGION": "us-east-1",
      "TWELVELABS_PEGASUS_MODEL_ID": ""
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "AnalysisPegasusFnServiceRoleD6E86B57",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 300
   },
   "DependsOn": [
    "AnalysisPegasusFnServiceRoleDefaultPolicyD1910F6B",
    "AnalysisPegasusFnServiceRoleD6E86B57"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisPegasusFn/Resource",
    "aws:asset:path": "asset.2053f255ed6e403977fcbc30e32ad8757cb204d64e7c84deb62216f96ee4834f",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "AnalysisMarengoFnServiceRole715EE6E9": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisMarengoFn/ServiceRole/Resource"
   }
  },
  "AnalysisMarengoFnServiceRoleDefaultPolicyC454C6D6": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "bedrock:InvokeModel",
       "Effect": "Allow",
       "Resource": "arn:aws:bedrock:us-east-1::foundation-model/*"
      },
      {
       "Action": "cloudwatch:PutMetricData",
       "Condition": {
        "StringEquals": {
         "cloudwatch:namespace": "MilkMobs/Bedrock"
        }
       },
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AnalysisMarengoFnServiceRoleDefaultPolicyC454C6D6",
    "Roles": [
     {
      "Ref": "AnalysisMarengoFnServiceRole715EE6E9"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisMarengoFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AnalysisMarengoFnE7B906B8": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "cdfda64c2d84c0d604c756defc9156f561dc587bae2edcd06d1060e19e921500.zip"
    },
    "Environment": {
     "Variables": {
      "BEDROCK_REGION": "us-east-1",
      "TWELVELABS_MARENGO_MODEL_ID": ""
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "AnalysisMarengoFnServiceRole715EE6E9",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 300
   },
   "DependsOn": [
    "AnalysisMarengoFnServiceRoleDefaultPolicyC454C6D6",
    "AnalysisMarengoFnServiceRole715EE6E9"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisMarengoFn/Resource",
    "aws:asset:path": "asset.cdfda64c2d84c0d604c756defc9156f561dc587bae2edcd06d1060e19e921500",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "AnalysisWriteResultFnServiceRoleC6A2489F": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisWriteResultFn/ServiceRole/Resource"
   }
  },
  "AnalysisWriteResultFnServiceRoleDefaultPolicy528B933B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "es:ESHttpDelete",
        "es:ESHttpPost",
        "es:ESHttpPut",
        "es:ESHttpPatch"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "VideoEmbeddingsDomain067A71F0",
             "Arn"
            ]
           },
           "/videos"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "VideoEmbeddingsDomain067A71F0",
             "Arn"
            ]
           },
           "/videos/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AnalysisWriteResultFnServiceRoleDefaultPolicy528B933B",
    "Roles": [
     {
      "Ref": "AnalysisWriteResultFnServiceRoleC6A2489F"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisWriteResultFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AnalysisWriteResultFnC2A76429": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "444b74ad3349fbabce2de4b85663a33037f5b0a06a9dfec56e4f58ce0c88a1bb.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      },
      "OPENSEARCH_ENDPOINT": {
       "Fn::GetAtt": [
        "VideoEmbeddingsDomain067A71F0",
        "DomainEndpoint"
       ]
      },
      "OPENSEARCH_INDEX_NAME": "videos"
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "AnalysisWriteResultFnServiceRoleC6A2489F",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "AnalysisWriteResultFnServiceRoleDefaultPolicy528B933B",
    "AnalysisWriteResultFnServiceRoleC6A2489F"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisWriteResultFn/Resource",
    "aws:asset:path": "asset.444b74ad3349fbabce2de4b85663a33037f5b0a06a9dfec56e4f58ce0c88a1bb",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ValidateVideoFnServiceRole71BD5B19": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ValidateVideoFn/ServiceRole/Resource"
   }
  },
  "ValidateVideoFnServiceRoleDefaultPolicyEBF4EB71": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ValidateVideoFnServiceRoleDefaultPolicyEBF4EB71",
    "Roles": [
     {
      "Ref": "ValidateVideoFnServiceRole71BD5B19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ValidateVideoFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ValidateVideoFn38264D58": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "c26e249546b4d7950279133b41c19bfd198a8055a0162ab9f127cd14e6410936.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      },
      "VALIDATION_THRESHOLD": "0.7"
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "ValidateVideoFnServiceRole71BD5B19",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "ValidateVideoFnServiceRoleDefaultPolicyEBF4EB71",
    "ValidateVideoFnServiceRole71BD5B19"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ValidateVideoFn/Resource",
    "aws:asset:path": "asset.c26e249546b4d7950279133b41c19bfd198a8055a0162ab9f127cd14e6410936",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "StartAnalysisFnServiceRole90D56A70": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/StartAnalysisFn/ServiceRole/Resource"
   }
  },
  "StartAnalysisFnServiceRoleDefaultPolicy455DEEBF": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "states:StartExecution",
       "Effect": "Allow",
       "Resource": {
        "Ref": "VideoAnalysisStateMachineA7892CAE"
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "UploadsBucket5E5E9B64",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "UploadsBucket5E5E9B64",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "GenerateThumbnailFn2BBD94BA",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "GenerateThumbnailFn2BBD94BA",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "StartAnalysisFnServiceRoleDefaultPolicy455DEEBF",
    "Roles": [
     {
      "Ref": "StartAnalysisFnServiceRole90D56A70"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/StartAnalysisFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "StartAnalysisFn88339548": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "0a48c672b579cc866c6dc7c5973356e7330b6a629eeb315e7585d7679d910ae2.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      },
      "STATE_MACHINE_ARN": {
       "Ref": "VideoAnalysisStateMachineA7892CAE"
      },
      "GENERATE_THUMBNAIL_FUNCTION_NAME": {
       "Ref": "GenerateThumbnailFn2BBD94BA"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "StartAnalysisFnServiceRole90D56A70",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "StartAnalysisFnServiceRoleDefaultPolicy455DEEBF",
    "StartAnalysisFnServiceRole90D56A70"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/StartAnalysisFn/Resource",
    "aws:asset:path": "asset.0a48c672b579cc866c6dc7c5973356e7330b6a629eeb315e7585d7679d910ae2",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "FFmpegLayer65FCD2A8": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "CompatibleArchitectures": [
     "x86_64"
    ],
    "CompatibleRuntimes": [
     "nodejs20.x"
    ],
    "Content": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "d6d8fef993a7f71ed7ae4aeb3d86fdf023c8cd50c76f139ca2ee7f6896926103.zip"
    },
    "Description": "FFmpeg static binary for video thumbnail generation"
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/FFmpegLayer/Resource",
    "aws:asset:path": "asset.d6d8fef993a7f71ed7ae4aeb3d86fdf023c8cd50c76f139ca2ee7f6896926103",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Content"
   }
  },
  "GenerateThumbnailFnServiceRole622C0FEF": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GenerateThumbnailFn/ServiceRole/Resource"
   }
  },
  "GenerateThumbnailFnServiceRoleDefaultPolicy1DD53BBA": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "UploadsBucket5E5E9B64",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "UploadsBucket5E5E9B64",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GenerateThumbnailFnServiceRoleDefaultPolicy1DD53BBA",
    "Roles": [
     {
      "Ref": "GenerateThumbnailFnServiceRole622C0FEF"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GenerateThumbnailFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GenerateThumbnailFn2BBD94BA": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "88580df72685ef1b90d13d7f7873ca1bafa82cf894dded938384b4f9a6d07af9.zip"
    },
    "Environment": {
     "Variables": {
      "UPLOADS_BUCKET_NAME": {
       "Ref": "UploadsBucket5E5E9B64"
      },
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      },
      "CLOUDFRONT_DISTRIBUTION_DOMAIN": {
       "Fn::GetAtt": [
        "VideoDistribution93465BBB",
        "DomainName"
       ]
      },
      "BUILD_TIMESTAMP": "2025-12-05T22:47:01.166Z"
     }
    },
    "Handler": "index.handler",
    "Layers": [
     {
      "Ref": "FFmpegLayer65FCD2A8"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "GenerateThumbnailFnServiceRole622C0FEF",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 300
   },
   "DependsOn": [
    "GenerateThumbnailFnServiceRoleDefaultPolicy1DD53BBA",
    "GenerateThumbnailFnServiceRole622C0FEF"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GenerateThumbnailFn/Resource",
    "aws:asset:path": "asset.88580df72685ef1b90d13d7f7873ca1bafa82cf894dded938384b4f9a6d07af9",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ClusterVideoFnServiceRoleC7038455": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ClusterVideoFn/ServiceRole/Resource"
   }
  },
  "ClusterVideoFnServiceRoleDefaultPolicyDAFFA579": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "MobsTableC49D34D5",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ClusterVideoFnServiceRoleDefaultPolicyDAFFA579",
    "Roles": [
     {
      "Ref": "ClusterVideoFnServiceRoleC7038455"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ClusterVideoFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ClusterVideoFnA18F77E1": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "c79fcd1aea2ed54518341f367ce906f8d258b72a7663a1ddc593854174741c89.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      },
      "MOBS_TABLE_NAME": {
       "Ref": "MobsTableC49D34D5"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "ClusterVideoFnServiceRoleC7038455",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "ClusterVideoFnServiceRoleDefaultPolicyDAFFA579",
    "ClusterVideoFnServiceRoleC7038455"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ClusterVideoFn/Resource",
    "aws:asset:path": "asset.c79fcd1aea2ed54518341f367ce906f8d258b72a7663a1ddc593854174741c89",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "GetVideoDetailFnServiceRole230300F7": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GetVideoDetailFn/ServiceRole/Resource"
   }
  },
  "GetVideoDetailFnServiceRoleDefaultPolicy38F3D09E": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "UploadsBucket5E5E9B64",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "UploadsBucket5E5E9B64",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetVideoDetailFnServiceRoleDefaultPolicy38F3D09E",
    "Roles": [
     {
      "Ref": "GetVideoDetailFnServiceRole230300F7"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GetVideoDetailFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GetVideoDetailFn98896F83": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "105f091b30617adb86b94cdaa56904e60ab034905f45cdc4ffef8aed97c84772.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      },
      "UPLOADS_BUCKET_NAME": {
       "Ref": "UploadsBucket5E5E9B64"
      },
      "CLOUDFRONT_DISTRIBUTION_DOMAIN": {
       "Fn::GetAtt": [
        "VideoDistribution93465BBB",
        "DomainName"
       ]
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "GetVideoDetailFnServiceRole230300F7",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 10
   },
   "DependsOn": [
    "GetVideoDetailFnServiceRoleDefaultPolicy38F3D09E",
    "GetVideoDetailFnServiceRole230300F7"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GetVideoDetailFn/Resource",
    "aws:asset:path": "asset.105f091b30617adb86b94cdaa56904e60ab034905f45cdc4ffef8aed97c84772",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "AdminListVideosFnServiceRole563BEDBF": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminListVideosFn/ServiceRole/Resource"
   }
  },
  "AdminListVideosFnServiceRoleDefaultPolicy56299FD5": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AdminListVideosFnServiceRoleDefaultPolicy56299FD5",
    "Roles": [
     {
      "Ref": "AdminListVideosFnServiceRole563BEDBF"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminListVideosFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AdminListVideosFn3DCC5AE5": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "1e62950a7bc6ec3a4f4ea1d9e5d84176c5961e70ec76c20c762eb2fc00606bf4.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      },
      "CLOUDFRONT_DISTRIBUTION_DOMAIN": {
       "Fn::GetAtt": [
        "VideoDistribution93465BBB",
        "DomainName"
       ]
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "AdminListVideosFnServiceRole563BEDBF",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 10
   },
   "DependsOn": [
    "AdminListVideosFnServiceRoleDefaultPolicy56299FD5",
    "AdminListVideosFnServiceRole563BEDBF"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminListVideosFn/Resource",
    "aws:asset:path": "asset.1e62950a7bc6ec3a4f4ea1d9e5d84176c5961e70ec76c20c762eb2fc00606bf4",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "AdminGetStatsFnServiceRoleED0D776A": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminGetStatsFn/ServiceRole/Resource"
   }
  },
  "AdminGetStatsFnServiceRoleDefaultPolicy5A8F9825": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "MobsTableC49D34D5",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AdminGetStatsFnServiceRoleDefaultPolicy5A8F9825",
    "Roles": [
     {
      "Ref": "AdminGetStatsFnServiceRoleED0D776A"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminGetStatsFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AdminGetStatsFnAC4350BC": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "dc4ea59e1f26b99bd8e4b47a998bb71613407160f174c4c1efe9171cd21dc651.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      },
      "MOBS_TABLE_NAME": {
       "Ref": "MobsTableC49D34D5"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "AdminGetStatsFnServiceRoleED0D776A",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "AdminGetStatsFnServiceRoleDefaultPolicy5A8F9825",
    "AdminGetStatsFnServiceRoleED0D776A"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminGetStatsFn/Resource",
    "aws:asset:path": "asset.dc4ea59e1f26b99bd8e4b47a998bb71613407160f174c4c1efe9171cd21dc651",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "AdminGetUsageStatsFnServiceRole9C5A7419": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminGetUsageStatsFn/ServiceRole/Resource"
   }
  },
  "AdminGetUsageStatsFnServiceRoleDefaultPolicy5E2C9C1B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "cloudwatch:GetMetricData",
        "cloudwatch:ListMetrics"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AdminGetUsageStatsFnServiceRoleDefaultPolicy5E2C9C1B",
    "Roles": [
     {
      "Ref": "AdminGetUsageStatsFnServiceRole9C5A7419"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminGetUsageStatsFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AdminGetUsageStatsFn60295C0F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "5e9f790f220334156c11e544127ef53112b01f8ca480db8ace332785e2187b45.zip"
    },
    "Environment": {
     "Variables": {
      "STACK_NAME": "MilkMobsStack",
      "TWELVELABS_PEGASUS_MODEL_ID": "",
      "TWELVELABS_MARENGO_MODEL_ID": ""
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "AdminGetUsageStatsFnServiceRole9C5A7419",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "AdminGetUsageStatsFnServiceRoleDefaultPolicy5E2C9C1B",
    "AdminGetUsageStatsFnServiceRole9C5A7419"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminGetUsageStatsFn/Resource",
    "aws:asset:path": "asset.5e9f790f220334156c11e544127ef53112b01f8ca480db8ace332785e2187b45",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "AdminGetEmbeddingsFnServiceRole71B06BAD": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminGetEmbeddingsFn/ServiceRole/Resource"
   }
  },
  "AdminGetEmbeddingsFnServiceRoleDefaultPolicy5548C442": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AdminGetEmbeddingsFnServiceRoleDefaultPolicy5548C442",
    "Roles": [
     {
      "Ref": "AdminGetEmbeddingsFnServiceRole71B06BAD"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminGetEmbeddingsFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AdminGetEmbeddingsFn69D21E5D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "d6fdb50f47f38b47d21da6f7c00c4de8b0cb52b81b1ed429f51b76e34af6c488.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      }
     }
    },
    "Handler": "index.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "AdminGetEmbeddingsFnServiceRole71B06BAD",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "AdminGetEmbeddingsFnServiceRoleDefaultPolicy5548C442",
    "AdminGetEmbeddingsFnServiceRole71B06BAD"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminGetEmbeddingsFn/Resource",
    "aws:asset:path": "asset.d6fdb50f47f38b47d21da6f7c00c4de8b0cb52b81b1ed429f51b76e34af6c488",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "AdminDeleteVideoFnServiceRole3A09A598": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminDeleteVideoFn/ServiceRole/Resource"
   }
  },
  "AdminDeleteVideoFnServiceRoleDefaultPolicy6B4EC453": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      },
      {
       "Action": "s3:DeleteObject*",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::GetAtt": [
            "UploadsBucket5E5E9B64",
            "Arn"
           ]
          },
          "/*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AdminDeleteVideoFnServiceRoleDefaultPolicy6B4EC453",
    "Roles": [
     {
      "Ref": "AdminDeleteVideoFnServiceRole3A09A598"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminDeleteVideoFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AdminDeleteVideoFn5402F042": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "7a4070ee45b6562cbc9d037ef961478e25987e911cdd177989b26bfc74b352c8.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      },
      "UPLOADS_BUCKET_NAME": {
       "Ref": "UploadsBucket5E5E9B64"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "AdminDeleteVideoFnServiceRole3A09A598",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "AdminDeleteVideoFnServiceRoleDefaultPolicy6B4EC453",
    "AdminDeleteVideoFnServiceRole3A09A598"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AdminDeleteVideoFn/Resource",
    "aws:asset:path": "asset.7a4070ee45b6562cbc9d037ef961478e25987e911cdd177989b26bfc74b352c8",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ListMobsFnServiceRole1DEE32AB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ListMobsFn/ServiceRole/Resource"
   }
  },
  "ListMobsFnServiceRoleDefaultPolicy806D424A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "MobsTableC49D34D5",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListMobsFnServiceRoleDefaultPolicy806D424A",
    "Roles": [
     {
      "Ref": "ListMobsFnServiceRole1DEE32AB"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ListMobsFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ListMobsFn0BE77E3A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "f7a4d89b0d4d58266e21857f471c043c1b3171d4128e85fb97c55f626b27e9f2.zip"
    },
    "Environment": {
     "Variables": {
      "MOBS_TABLE_NAME": {
       "Ref": "MobsTableC49D34D5"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "ListMobsFnServiceRole1DEE32AB",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 10
   },
   "DependsOn": [
    "ListMobsFnServiceRoleDefaultPolicy806D424A",
    "ListMobsFnServiceRole1DEE32AB"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ListMobsFn/Resource",
    "aws:asset:path": "asset.f7a4d89b0d4d58266e21857f471c043c1b3171d4128e85fb97c55f626b27e9f2",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "GetMobFnServiceRole21BE82D4": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GetMobFn/ServiceRole/Resource"
   }
  },
  "GetMobFnServiceRoleDefaultPolicy44FAB3F3": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "MobsTableC49D34D5",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetMobFnServiceRoleDefaultPolicy44FAB3F3",
    "Roles": [
     {
      "Ref": "GetMobFnServiceRole21BE82D4"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GetMobFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GetMobFn1FB67C2C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "598f16f7eba6780137fc3cdb1291966c033f6b0153d07950b9efe2beb33f0a80.zip"
    },
    "Environment": {
     "Variables": {
      "MOBS_TABLE_NAME": {
       "Ref": "MobsTableC49D34D5"
      },
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "GetMobFnServiceRole21BE82D4",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 10
   },
   "DependsOn": [
    "GetMobFnServiceRoleDefaultPolicy44FAB3F3",
    "GetMobFnServiceRole21BE82D4"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GetMobFn/Resource",
    "aws:asset:path": "asset.598f16f7eba6780137fc3cdb1291966c033f6b0153d07950b9efe2beb33f0a80",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "GetFeedFnServiceRole49452CD0": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GetFeedFn/ServiceRole/Resource"
   }
  },
  "GetFeedFnServiceRoleDefaultPolicyFA1FB49A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "MobsTableC49D34D5",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetFeedFnServiceRoleDefaultPolicyFA1FB49A",
    "Roles": [
     {
      "Ref": "GetFeedFnServiceRole49452CD0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GetFeedFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GetFeedFnBF3919C0": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "7f0903ba04e37a076ecc9f5d78b7a830e65cee903b39c1b010b4478db24917ea.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      },
      "MOBS_TABLE_NAME": {
       "Ref": "MobsTableC49D34D5"
      },
      "CLOUDFRONT_DISTRIBUTION_DOMAIN": {
       "Fn::GetAtt": [
        "VideoDistribution93465BBB",
        "DomainName"
       ]
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "GetFeedFnServiceRole49452CD0",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 10
   },
   "DependsOn": [
    "GetFeedFnServiceRoleDefaultPolicyFA1FB49A",
    "GetFeedFnServiceRole49452CD0"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GetFeedFn/Resource",
    "aws:asset:path": "asset.7f0903ba04e37a076ecc9f5d78b7a830e65cee903b39c1b010b4478db24917ea",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "MilkMobsEventBus5827410E": {
   "Type": "AWS::Events::EventBus",
   "Properties": {
    "Name": "milk-mobs-bus",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsEventBus/Resource"
   }
  },
  "VideoAnalysisStateMachineRole21C1D5B6": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "states.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/VideoAnalysisStateMachine/Role/Resource"
   }
  },
  "VideoAnalysisStateMachineRoleDefaultPolicy2F1FF8F4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AnalysisMarkProcessingFn1DCE525A",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AnalysisMarkProcessingFn1DCE525A",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AnalysisWriteResultFnC2A76429",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AnalysisWriteResultFnC2A76429",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "ValidateVideoFn38264D58",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "ValidateVideoFn38264D58",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "ClusterVideoFnA18F77E1",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "ClusterVideoFnA18F77E1",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "events:PutEvents",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "MilkMobsEventBus5827410E",
         "Arn"
        ]
       }
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AnalysisPegasusFnA65D88A0",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AnalysisPegasusFnA65D88A0",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AnalysisMarengoFnE7B906B8",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AnalysisMarengoFnE7B906B8",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "VideoAnalysisStateMachineRoleDefaultPolicy2F1FF8F4",
    "Roles": [
     {
      "Ref": "VideoAnalysisStateMachineRole21C1D5B6"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/VideoAnalysisStateMachine/Role/DefaultPolicy/Resource"
   }
  },
  "VideoAnalysisStateMachineA7892CAE": {
   "Type": "AWS::StepFunctions::StateMachine",
   "Properties": {
    "DefinitionString": {
     "Fn::Join": [
      "",
      [
       "{\"StartAt\":\"MarkProcessingTask\",\"States\":{\"MarkProcessingTask\":{\"Next\":\"ParallelAnalysis\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",
       {
        "Fn::GetAtt": [
         "AnalysisMarkProcessingFn1DCE525A",
         "Arn"
        ]
       },
       "\",\"Payload.$\":\"$\"}},\"ParallelAnalysis\":{\"Type\":\"Parallel\",\"Comment\":\"Run Pegasus and Marengo analysis in parallel\",\"Next\":\"MergeResults\",\"Branches\":[{\"StartAt\":\"PegasusTask\",\"States\":{\"PegasusTask\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",
       {
        "Fn::GetAtt": [
         "AnalysisPegasusFnA65D88A0",
         "Arn"
        ]
       },
       "\",\"Payload.$\":\"$\"}}}},{\"StartAt\":\"MarengoTask\",\"States\":{\"MarengoTask\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",
       {
        "Fn::GetAtt": [
         "AnalysisMarengoFnE7B906B8",
         "Arn"
        ]
       },
       "\",\"Payload.$\":\"$\"}}}}]},\"MergeResults\":{\"Type\":\"Pass\",\"Parameters\":{\"videoId.$\":\"$[0].videoId\",\"s3Bucket.$\":\"$[0].s3Bucket\",\"s3Key.$\":\"$[0].s3Key\",\"hashtags.$\":\"$[0].hashtags\",\"participation.$\":\"$[0].participation\",\"embedding.$\":\"$[1].embedding\"},\"Next\":\"WriteResultTask\"},\"WriteResultTask\":{\"Next\":\"ValidateTask\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",
       {
        "Fn::GetAtt": [
         "AnalysisWriteResultFnC2A76429",
         "Arn"
        ]
       },
       "\",\"Payload.$\":\"$\"}},\"ValidateTask\":{\"Next\":\"ClusterTask\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",
       {
        "Fn::GetAtt": [
         "ValidateVideoFn38264D58",
         "Arn"
        ]
       },
       "\",\"Payload.$\":\"$\"}},\"ClusterTask\":{\"Next\":\"EmitVideoAnalyzedEvent\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",
       {
        "Fn::GetAtt": [
         "ClusterVideoFnA18F77E1",
         "Arn"
        ]
       },
       "\",\"Payload.$\":\"$\"}},\"EmitVideoAnalyzedEvent\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::events:putEvents\",\"Parameters\":{\"Entries\":[{\"Detail\":{\"videoId.$\":\"$.videoId\",\"status.$\":\"$.status\",\"participationScore.$\":\"$.participationScore\",\"validationScore.$\":\"$.validationScore\",\"mobId.$\":\"$.mobId\"},\"DetailType\":\"VideoAnalyzed\",\"EventBusName\":\"",
       {
        "Fn::GetAtt": [
         "MilkMobsEventBus5827410E",
         "Arn"
        ]
       },
       "\",\"Source\":\"milk-mobs.analysis\"}]}}},\"TimeoutSeconds\":600,\"Comment\":\"Video analysis pipeline using Pegasus and Marengo\"}"
      ]
     ]
    },
    "RoleArn": {
     "Fn::GetAtt": [
      "VideoAnalysisStateMachineRole21C1D5B6",
      "Arn"
     ]
    },
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "DependsOn": [
    "VideoAnalysisStateMachineRoleDefaultPolicy2F1FF8F4",
    "VideoAnalysisStateMachineRole21C1D5B6"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/VideoAnalysisStateMachine/Resource"
   }
  },
  "GetExecutionHistoryFnServiceRole9F5657C6": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GetExecutionHistoryFn/ServiceRole/Resource"
   }
  },
  "GetExecutionHistoryFnServiceRoleDefaultPolicyCB3A8B2B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "states:ListExecutions",
        "states:DescribeExecution",
        "states:GetExecutionHistory"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GetExecutionHistoryFnServiceRoleDefaultPolicyCB3A8B2B",
    "Roles": [
     {
      "Ref": "GetExecutionHistoryFnServiceRole9F5657C6"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GetExecutionHistoryFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "GetExecutionHistoryFnE73EB475": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "2535119e5175d7386167db1b1735f2f211fa652b8a1cb357db1af57d057b4320.zip"
    },
    "Environment": {
     "Variables": {
      "STATE_MACHINE_ARN": {
       "Ref": "VideoAnalysisStateMachineA7892CAE"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "GetExecutionHistoryFnServiceRole9F5657C6",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "GetExecutionHistoryFnServiceRoleDefaultPolicyCB3A8B2B",
    "GetExecutionHistoryFnServiceRole9F5657C6"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/GetExecutionHistoryFn/Resource",
    "aws:asset:path": "asset.2535119e5175d7386167db1b1735f2f211fa652b8a1cb357db1af57d057b4320",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource"
   }
  },
  "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:PutBucketNotification",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UploadsBucket5E5E9B64",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36",
    "Roles": [
     {
      "Ref": "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource"
   }
  },
  "BucketNotificationsHandler050a0587b7544547bf325f094a3db8347ECC3691": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Description": "AWS CloudFormation handler for \"Custom::S3BucketNotifications\" resources (@aws-cdk/aws-s3)",
    "Code": {
     "ZipFile": "import boto3  # type: ignore\nimport json\nimport logging\nimport urllib.request\n\ns3 = boto3.client(\"s3\")\n\nEVENTBRIDGE_CONFIGURATION = 'EventBridgeConfiguration'\nCONFIGURATION_TYPES = [\"TopicConfigurations\", \"QueueConfigurations\", \"LambdaFunctionConfigurations\"]\n\ndef handler(event: dict, context):\n  response_status = \"SUCCESS\"\n  error_message = \"\"\n  try:\n    props = event[\"ResourceProperties\"]\n    notification_configuration = props[\"NotificationConfiguration\"]\n    managed = props.get('Managed', 'true').lower() == 'true'\n    skipDestinationValidation = props.get('SkipDestinationValidation', 'false').lower() == 'true'\n    stack_id = event['StackId']\n    old = event.get(\"OldResourceProperties\", {}).get(\"NotificationConfiguration\", {})\n    if managed:\n      config = handle_managed(event[\"RequestType\"], notification_configuration)\n    else:\n      config = handle_unmanaged(props[\"BucketName\"], stack_id, event[\"RequestType\"], notification_configuration, old)\n    s3.put_bucket_notification_configuration(Bucket=props[\"BucketName\"], NotificationConfiguration=config, SkipDestinationValidation=skipDestinationValidation)\n  except Exception as e:\n    logging.exception(\"Failed to put bucket notification configuration\")\n    response_status = \"FAILED\"\n    error_message = f\"Error: {str(e)}. \"\n  finally:\n    submit_response(event, context, response_status, error_message)\n\ndef handle_managed(request_type, notification_configuration):\n  if request_type == 'Delete':\n    return {}\n  return notification_configuration\n\ndef handle_unmanaged(bucket, stack_id, request_type, notification_configuration, old):\n  def get_id(n):\n    n['Id'] = ''\n    sorted_notifications = sort_filter_rules(n)\n    strToHash=json.dumps(sorted_notifications, sort_keys=True).replace('\"Name\": \"prefix\"', '\"Name\": \"Prefix\"').replace('\"Name\": \"suffix\"', '\"Name\": \"Suffix\"')\n    return f\"{stack_id}-{hash(strToHash)}\"\n  def with_id(n):\n    n['Id'] = get_id(n)\n    return n\n\n  external_notifications = {}\n  existing_notifications = s3.get_bucket_notification_configuration(Bucket=bucket)\n  for t in CONFIGURATION_TYPES:\n    if request_type == 'Update':\n        old_incoming_ids = [get_id(n) for n in old.get(t, [])]\n        external_notifications[t] = [n for n in existing_notifications.get(t, []) if not get_id(n) in old_incoming_ids]      \n    elif request_type == 'Delete':\n        external_notifications[t] = [n for n in existing_notifications.get(t, []) if not n['Id'].startswith(f\"{stack_id}-\")]\n    elif request_type == 'Create':\n        external_notifications[t] = [n for n in existing_notifications.get(t, [])]\n  if EVENTBRIDGE_CONFIGURATION in existing_notifications:\n    external_notifications[EVENTBRIDGE_CONFIGURATION] = existing_notifications[EVENTBRIDGE_CONFIGURATION]\n\n  if request_type == 'Delete':\n    return external_notifications\n\n  notifications = {}\n  for t in CONFIGURATION_TYPES:\n    external = external_notifications.get(t, [])\n    incoming = [with_id(n) for n in notification_configuration.get(t, [])]\n    notifications[t] = external + incoming\n\n  if EVENTBRIDGE_CONFIGURATION in notification_configuration:\n    notifications[EVENTBRIDGE_CONFIGURATION] = notification_configuration[EVENTBRIDGE_CONFIGURATION]\n  elif EVENTBRIDGE_CONFIGURATION in external_notifications:\n    notifications[EVENTBRIDGE_CONFIGURATION] = external_notifications[EVENTBRIDGE_CONFIGURATION]\n\n  return notifications\n\ndef submit_response(event: dict, context, response_status: str, error_message: str):\n  response_body = json.dumps(\n    {\n      \"Status\": response_status,\n      \"Reason\": f\"{error_message}See the details in CloudWatch Log Stream: {context.log_stream_name}\",\n      \"PhysicalResourceId\": event.get(\"PhysicalResourceId\") or event[\"LogicalResourceId\"],\n      \"StackId\": event[\"StackId\"],\n      \"RequestId\": event[\"RequestId\"],\n      \"LogicalResourceId\": event[\"LogicalResourceId\"],\n      \"NoEcho\": False,\n    }\n  ).encode(\"utf-8\")\n  headers = {\"content-type\": \"\", \"content-length\": str(len(response_body))}\n  try:\n    req = urllib.request.Request(url=event[\"ResponseURL\"], headers=headers, data=response_body, method=\"PUT\")\n    with urllib.request.urlopen(req) as response:\n      print(response.read().decode(\"utf-8\"))\n    print(\"Status code: \" + response.reason)\n  except Exception as e:\n      print(\"send(..) failed executing request.urlopen(..): \" + str(e))\n\ndef sort_filter_rules(json_obj):\n  if not isinstance(json_obj, dict):\n      return json_obj\n  for key, value in json_obj.items():\n      if isinstance(value, dict):\n          json_obj[key] = sort_filter_rules(value)\n      elif isinstance(value, list):\n          json_obj[key] = [sort_filter_rules(item) for item in value]\n  if \"Filter\" in json_obj and \"Key\" in json_obj[\"Filter\"] and \"FilterRules\" in json_obj[\"Filter\"][\"Key\"]:\n      filter_rules = json_obj[\"Filter\"][\"Key\"][\"FilterRules\"]\n      sorted_filter_rules = sorted(filter_rules, key=lambda x: x[\"Name\"])\n      json_obj[\"Filter\"][\"Key\"][\"FilterRules\"] = sorted_filter_rules\n  return json_obj"
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC",
      "Arn"
     ]
    },
    "Runtime": "python3.13",
    "Timeout": 300,
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "DependsOn": [
    "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36",
    "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource"
   }
  },
  "ClusterEmbeddingsFnServiceRoleE3AD4487": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ClusterEmbeddingsFn/ServiceRole/Resource"
   }
  },
  "ClusterEmbeddingsFnServiceRoleDefaultPolicyB0282385": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "MobsTableC49D34D5",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ClusterEmbeddingsFnServiceRoleDefaultPolicyB0282385",
    "Roles": [
     {
      "Ref": "ClusterEmbeddingsFnServiceRoleE3AD4487"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ClusterEmbeddingsFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ClusterEmbeddingsFnF96ED85B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "623c310c2414a8dd3ade79235d990c8c10d27273a478467a1e3d9eff7a5edfd3.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      },
      "MOBS_TABLE_NAME": {
       "Ref": "MobsTableC49D34D5"
      }
     }
    },
    "Handler": "index.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "ClusterEmbeddingsFnServiceRoleE3AD4487",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 300
   },
   "DependsOn": [
    "ClusterEmbeddingsFnServiceRoleDefaultPolicyB0282385",
    "ClusterEmbeddingsFnServiceRoleE3AD4487"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ClusterEmbeddingsFn/Resource",
    "aws:asset:path": "asset.623c310c2414a8dd3ade79235d990c8c10d27273a478467a1e3d9eff7a5edfd3",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ClusteringSchedule9F442E8C": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "Description": "Trigger batch clustering of video embeddings",
    "ScheduleExpression": "rate(1 hour)",
    "State": "ENABLED",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "ClusterEmbeddingsFnF96ED85B",
        "Arn"
       ]
      },
      "Id": "Target0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ClusteringSchedule/Resource"
   }
  },
  "ClusteringScheduleAllowEventRuleMilkMobsStackClusterEmbeddingsFnA7F1B5F81323C14D": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ClusterEmbeddingsFnF96ED85B",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "ClusteringSchedule9F442E8C",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/ClusteringSchedule/AllowEventRuleMilkMobsStackClusterEmbeddingsFnA7F1B5F8"
   }
  },
  "MilkMobsApiB76DFE80": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Name": "Milk Mobs API",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Resource"
   }
  },
  "MilkMobsApiCloudWatchRole9E515C93": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "apigateway.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/CloudWatchRole/Resource"
   }
  },
  "MilkMobsApiAccountE491E91D": {
   "Type": "AWS::ApiGateway::Account",
   "Properties": {
    "CloudWatchRoleArn": {
     "Fn::GetAtt": [
      "MilkMobsApiCloudWatchRole9E515C93",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "MilkMobsApiB76DFE80"
   ],
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Account"
   }
  },
  "MilkMobsApiDeployment87A47DF92cf89c3a2cad828f8ec7f88660df3c6a": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "Automatically created by the RestApi construct",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "DependsOn": [
    "MilkMobsApiadminembeddingsGETC632E60E",
    "MilkMobsApiadminembeddingsOPTIONSD5E58071",
    "MilkMobsApiadminembeddingsFC669F9D",
    "MilkMobsApiadminOPTIONS263D3C37",
    "MilkMobsApiadminEFD758FD",
    "MilkMobsApiadminstatsGETFE843C3C",
    "MilkMobsApiadminstatsOPTIONS07B441EB",
    "MilkMobsApiadminstats3C76CDCD",
    "MilkMobsApiadminusagestatsGET17329F38",
    "MilkMobsApiadminusagestatsOPTIONSC5D54522",
    "MilkMobsApiadminusagestatsC2FE397A",
    "MilkMobsApiadminvideosvideoIdDELETE4162E56D",
    "MilkMobsApiadminvideosvideoIdOPTIONS24277149",
    "MilkMobsApiadminvideosvideoId1DBD90EB",
    "MilkMobsApiadminvideosGET0E3A684B",
    "MilkMobsApiadminvideosOPTIONSF02CB596",
    "MilkMobsApiadminvideos77E8CFED",
    "MilkMobsApiexecutionhistoryGET1758C3BD",
    "MilkMobsApiexecutionhistoryOPTIONSA631B4D5",
    "MilkMobsApiexecutionhistory5F21AD6E",
    "MilkMobsApifeedGET7BF4623E",
    "MilkMobsApifeedOPTIONSC0194EAF",
    "MilkMobsApifeed1645A951",
    "MilkMobsApimobsmobIdGET0ECBA1DC",
    "MilkMobsApimobsmobIdOPTIONS1209B5E7",
    "MilkMobsApimobsmobIdF0789012",
    "MilkMobsApimobsGET0951FDEC",
    "MilkMobsApimobsOPTIONSA9666A90",
    "MilkMobsApimobsAA7D8C29",
    "MilkMobsApiOPTIONSFE397549",
    "MilkMobsApisearchOPTIONS61896BF0",
    "MilkMobsApisearch587405B7",
    "MilkMobsApisearchsimilarGET9141152B",
    "MilkMobsApisearchsimilarOPTIONS01B398F1",
    "MilkMobsApisearchsimilar1862FE4A",
    "MilkMobsApivalidatevideoIdGET05A96543",
    "MilkMobsApivalidatevideoIdOPTIONS7CF11721",
    "MilkMobsApivalidatevideoId1D263AB4",
    "MilkMobsApivalidateOPTIONSB5EED471",
    "MilkMobsApivalidatePOST5664FE5A",
    "MilkMobsApivalidateFD68B44A",
    "MilkMobsApivideosvideoIdGETBFB4E054",
    "MilkMobsApivideosvideoIdOPTIONS4D3DE0C8",
    "MilkMobsApivideosvideoId87C65709",
    "MilkMobsApivideosfeedGET730B1ED9",
    "MilkMobsApivideosfeedOPTIONSDC889B1B",
    "MilkMobsApivideosfeedD1A66EBF",
    "MilkMobsApivideosOPTIONSC6D72157",
    "MilkMobsApivideosE506076B",
    "MilkMobsApivideossubmitOPTIONS5DB3D8F2",
    "MilkMobsApivideossubmitPOSTF4D95FAD",
    "MilkMobsApivideossubmit533FD090",
    "MilkMobsApivideosuserGET3F815581",
    "MilkMobsApivideosuserOPTIONS5CD0C06A",
    "MilkMobsApivideosuserEA56AC32"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Deployment/Resource",
    "aws:cdk:do-not-refactor": true
   }
  },
  "MilkMobsApiDeploymentStageprod1C57746E": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "DeploymentId": {
     "Ref": "MilkMobsApiDeployment87A47DF92cf89c3a2cad828f8ec7f88660df3c6a"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    },
    "StageName": "prod",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "DependsOn": [
    "MilkMobsApiAccountE491E91D"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/DeploymentStage.prod/Resource"
   }
  },
  "MilkMobsApiOPTIONSFE397549": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Fn::GetAtt": [
      "MilkMobsApiB76DFE80",
      "RootResourceId"
     ]
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/OPTIONS/Resource"
   }
  },
  "MilkMobsApivideosE506076B": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "MilkMobsApiB76DFE80",
      "RootResourceId"
     ]
    },
    "PathPart": "videos",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/Resource"
   }
  },
  "MilkMobsApivideosOPTIONSC6D72157": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApivideosE506076B"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/OPTIONS/Resource"
   }
  },
  "MilkMobsApivideossubmit533FD090": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "MilkMobsApivideosE506076B"
    },
    "PathPart": "submit",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/submit/Resource"
   }
  },
  "MilkMobsApivideossubmitOPTIONS5DB3D8F2": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApivideossubmit533FD090"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/submit/OPTIONS/Resource"
   }
  },
  "MilkMobsApivideossubmitPOSTApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DPOSTvideossubmit9504F997": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateUploadFnFC5660F7",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/POST/videos/submit"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/submit/POST/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.POST..videos.submit"
   }
  },
  "MilkMobsApivideossubmitPOSTApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DPOSTvideossubmitDF4A4607": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateUploadFnFC5660F7",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/POST/videos/submit"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/submit/POST/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.POST..videos.submit"
   }
  },
  "MilkMobsApivideossubmitPOSTF4D95FAD": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "CreateUploadFnFC5660F7",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApivideossubmit533FD090"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/submit/POST/Resource"
   }
  },
  "MilkMobsApivideosuserEA56AC32": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "MilkMobsApivideosE506076B"
    },
    "PathPart": "user",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/user/Resource"
   }
  },
  "MilkMobsApivideosuserOPTIONS5CD0C06A": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApivideosuserEA56AC32"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/user/OPTIONS/Resource"
   }
  },
  "MilkMobsApivideosuserGETApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DGETvideosuser38E747BD": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListUserVideosFn6B2F49BA",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/GET/videos/user"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/user/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.user"
   }
  },
  "MilkMobsApivideosuserGETApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DGETvideosuser64CC13C7": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListUserVideosFn6B2F49BA",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/GET/videos/user"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/user/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.user"
   }
  },
  "MilkMobsApivideosuserGET3F815581": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ListUserVideosFn6B2F49BA",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApivideosuserEA56AC32"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/user/GET/Resource"
   }
  },
  "MilkMobsApivideosvideoId87C65709": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "MilkMobsApivideosE506076B"
    },
    "PathPart": "{videoId}",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/{videoId}/Resource"
   }
  },
  "MilkMobsApivideosvideoIdOPTIONS4D3DE0C8": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApivideosvideoId87C65709"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/{videoId}/OPTIONS/Resource"
   }
  },
  "MilkMobsApivideosvideoIdGETApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DGETvideosvideoId96EA7D67": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetVideoDetailFn98896F83",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/GET/videos/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/{videoId}/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.{videoId}"
   }
  },
  "MilkMobsApivideosvideoIdGETApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DGETvideosvideoId87A7331C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetVideoDetailFn98896F83",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/GET/videos/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/{videoId}/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.{videoId}"
   }
  },
  "MilkMobsApivideosvideoIdGETBFB4E054": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetVideoDetailFn98896F83",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApivideosvideoId87C65709"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/{videoId}/GET/Resource"
   }
  },
  "MilkMobsApivideosfeedD1A66EBF": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "MilkMobsApivideosE506076B"
    },
    "PathPart": "feed",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/feed/Resource"
   }
  },
  "MilkMobsApivideosfeedOPTIONSDC889B1B": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApivideosfeedD1A66EBF"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/feed/OPTIONS/Resource"
   }
  },
  "MilkMobsApivideosfeedGETApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DGETvideosfeed10BAFE31": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetFeedFnBF3919C0",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/GET/videos/feed"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/feed/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.feed"
   }
  },
  "MilkMobsApivideosfeedGETApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DGETvideosfeedCF0187A4": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetFeedFnBF3919C0",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/GET/videos/feed"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/feed/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..videos.feed"
   }
  },
  "MilkMobsApivideosfeedGET730B1ED9": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetFeedFnBF3919C0",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApivideosfeedD1A66EBF"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/videos/feed/GET/Resource"
   }
  },
  "MilkMobsApifeed1645A951": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "MilkMobsApiB76DFE80",
      "RootResourceId"
     ]
    },
    "PathPart": "feed",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/feed/Resource"
   }
  },
  "MilkMobsApifeedOPTIONSC0194EAF": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApifeed1645A951"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/feed/OPTIONS/Resource"
   }
  },
  "MilkMobsApifeedGETApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DGETfeed13202FA0": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetFeedFnBF3919C0",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/GET/feed"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/feed/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..feed"
   }
  },
  "MilkMobsApifeedGETApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DGETfeed69AC912F": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetFeedFnBF3919C0",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/GET/feed"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/feed/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..feed"
   }
  },
  "MilkMobsApifeedGET7BF4623E": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetFeedFnBF3919C0",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApifeed1645A951"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/feed/GET/Resource"
   }
  },
  "MilkMobsApiadminEFD758FD": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "MilkMobsApiB76DFE80",
      "RootResourceId"
     ]
    },
    "PathPart": "admin",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/Resource"
   }
  },
  "MilkMobsApiadminOPTIONS263D3C37": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApiadminEFD758FD"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/OPTIONS/Resource"
   }
  },
  "MilkMobsApiadminvideos77E8CFED": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "MilkMobsApiadminEFD758FD"
    },
    "PathPart": "videos",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/videos/Resource"
   }
  },
  "MilkMobsApiadminvideosOPTIONSF02CB596": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApiadminvideos77E8CFED"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/videos/OPTIONS/Resource"
   }
  },
  "MilkMobsApiadminvideosGETApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DGETadminvideos1581E706": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AdminListVideosFn3DCC5AE5",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/GET/admin/videos"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/videos/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.videos"
   }
  },
  "MilkMobsApiadminvideosGETApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DGETadminvideos90331C82": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AdminListVideosFn3DCC5AE5",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/GET/admin/videos"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/videos/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.videos"
   }
  },
  "MilkMobsApiadminvideosGET0E3A684B": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AdminListVideosFn3DCC5AE5",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApiadminvideos77E8CFED"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/videos/GET/Resource"
   }
  },
  "MilkMobsApiadminvideosvideoId1DBD90EB": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "MilkMobsApiadminvideos77E8CFED"
    },
    "PathPart": "{videoId}",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/videos/{videoId}/Resource"
   }
  },
  "MilkMobsApiadminvideosvideoIdOPTIONS24277149": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApiadminvideosvideoId1DBD90EB"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/videos/{videoId}/OPTIONS/Resource"
   }
  },
  "MilkMobsApiadminvideosvideoIdDELETEApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DDELETEadminvideosvideoId46F8E2DF": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AdminDeleteVideoFn5402F042",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/DELETE/admin/videos/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/videos/{videoId}/DELETE/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.DELETE..admin.videos.{videoId}"
   }
  },
  "MilkMobsApiadminvideosvideoIdDELETEApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DDELETEadminvideosvideoId60051368": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AdminDeleteVideoFn5402F042",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/DELETE/admin/videos/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/videos/{videoId}/DELETE/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.DELETE..admin.videos.{videoId}"
   }
  },
  "MilkMobsApiadminvideosvideoIdDELETE4162E56D": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AdminDeleteVideoFn5402F042",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     },
     {
      "StatusCode": "404"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApiadminvideosvideoId1DBD90EB"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/videos/{videoId}/DELETE/Resource"
   }
  },
  "MilkMobsApiadminstats3C76CDCD": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "MilkMobsApiadminEFD758FD"
    },
    "PathPart": "stats",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/stats/Resource"
   }
  },
  "MilkMobsApiadminstatsOPTIONS07B441EB": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApiadminstats3C76CDCD"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/stats/OPTIONS/Resource"
   }
  },
  "MilkMobsApiadminstatsGETApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DGETadminstatsB3BE4E09": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AdminGetStatsFnAC4350BC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/GET/admin/stats"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/stats/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.stats"
   }
  },
  "MilkMobsApiadminstatsGETApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DGETadminstats2CEAE5B5": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AdminGetStatsFnAC4350BC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/GET/admin/stats"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/stats/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.stats"
   }
  },
  "MilkMobsApiadminstatsGETFE843C3C": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AdminGetStatsFnAC4350BC",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApiadminstats3C76CDCD"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/stats/GET/Resource"
   }
  },
  "MilkMobsApiadminusagestatsC2FE397A": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "MilkMobsApiadminEFD758FD"
    },
    "PathPart": "usage-stats",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/usage-stats/Resource"
   }
  },
  "MilkMobsApiadminusagestatsOPTIONSC5D54522": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApiadminusagestatsC2FE397A"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/usage-stats/OPTIONS/Resource"
   }
  },
  "MilkMobsApiadminusagestatsGETApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DGETadminusagestats1366160C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AdminGetUsageStatsFn60295C0F",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/GET/admin/usage-stats"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/usage-stats/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.usage-stats"
   }
  },
  "MilkMobsApiadminusagestatsGETApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DGETadminusagestats824719BA": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AdminGetUsageStatsFn60295C0F",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/GET/admin/usage-stats"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/usage-stats/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.usage-stats"
   }
  },
  "MilkMobsApiadminusagestatsGET17329F38": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AdminGetUsageStatsFn60295C0F",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApiadminusagestatsC2FE397A"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/usage-stats/GET/Resource"
   }
  },
  "MilkMobsApiadminembeddingsFC669F9D": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "MilkMobsApiadminEFD758FD"
    },
    "PathPart": "embeddings",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/embeddings/Resource"
   }
  },
  "MilkMobsApiadminembeddingsOPTIONSD5E58071": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApiadminembeddingsFC669F9D"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/embeddings/OPTIONS/Resource"
   }
  },
  "MilkMobsApiadminembeddingsGETApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DGETadminembeddings018096AA": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AdminGetEmbeddingsFn69D21E5D",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/GET/admin/embeddings"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/embeddings/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.embeddings"
   }
  },
  "MilkMobsApiadminembeddingsGETApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DGETadminembeddings7B60C673": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AdminGetEmbeddingsFn69D21E5D",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/GET/admin/embeddings"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/embeddings/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..admin.embeddings"
   }
  },
  "MilkMobsApiadminembeddingsGETC632E60E": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AdminGetEmbeddingsFn69D21E5D",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApiadminembeddingsFC669F9D"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/admin/embeddings/GET/Resource"
   }
  },
  "MilkMobsApimobsAA7D8C29": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "MilkMobsApiB76DFE80",
      "RootResourceId"
     ]
    },
    "PathPart": "mobs",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/mobs/Resource"
   }
  },
  "MilkMobsApimobsOPTIONSA9666A90": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApimobsAA7D8C29"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/mobs/OPTIONS/Resource"
   }
  },
  "MilkMobsApimobsGETApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DGETmobsF31C48BA": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListMobsFn0BE77E3A",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/GET/mobs"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/mobs/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs"
   }
  },
  "MilkMobsApimobsGETApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DGETmobs90597FF2": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListMobsFn0BE77E3A",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/GET/mobs"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/mobs/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs"
   }
  },
  "MilkMobsApimobsGET0951FDEC": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ListMobsFn0BE77E3A",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApimobsAA7D8C29"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/mobs/GET/Resource"
   }
  },
  "MilkMobsApimobsmobIdF0789012": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "MilkMobsApimobsAA7D8C29"
    },
    "PathPart": "{mobId}",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/mobs/{mobId}/Resource"
   }
  },
  "MilkMobsApimobsmobIdOPTIONS1209B5E7": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApimobsmobIdF0789012"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/mobs/{mobId}/OPTIONS/Resource"
   }
  },
  "MilkMobsApimobsmobIdGETApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DGETmobsmobIdD6746AA4": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetMobFn1FB67C2C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/GET/mobs/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/mobs/{mobId}/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs.{mobId}"
   }
  },
  "MilkMobsApimobsmobIdGETApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DGETmobsmobIdD21CCC3A": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetMobFn1FB67C2C",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/GET/mobs/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/mobs/{mobId}/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..mobs.{mobId}"
   }
  },
  "MilkMobsApimobsmobIdGET0ECBA1DC": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetMobFn1FB67C2C",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApimobsmobIdF0789012"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/mobs/{mobId}/GET/Resource"
   }
  },
  "MilkMobsApisearch587405B7": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "MilkMobsApiB76DFE80",
      "RootResourceId"
     ]
    },
    "PathPart": "search",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/search/Resource"
   }
  },
  "MilkMobsApisearchOPTIONS61896BF0": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApisearch587405B7"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/search/OPTIONS/Resource"
   }
  },
  "MilkMobsApisearchsimilar1862FE4A": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "MilkMobsApisearch587405B7"
    },
    "PathPart": "similar",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/search/similar/Resource"
   }
  },
  "MilkMobsApisearchsimilarOPTIONS01B398F1": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApisearchsimilar1862FE4A"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/search/similar/OPTIONS/Resource"
   }
  },
  "MilkMobsApisearchsimilarGETApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DGETsearchsimilar656EB0C2": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "SearchSimilarFn25B2FAE1",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/GET/search/similar"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/search/similar/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..search.similar"
   }
  },
  "MilkMobsApisearchsimilarGETApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DGETsearchsimilarD483590D": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "SearchSimilarFn25B2FAE1",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/GET/search/similar"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/search/similar/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..search.similar"
   }
  },
  "MilkMobsApisearchsimilarGET9141152B": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "SearchSimilarFn25B2FAE1",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApisearchsimilar1862FE4A"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/search/similar/GET/Resource"
   }
  },
  "MilkMobsApivalidateFD68B44A": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "MilkMobsApiB76DFE80",
      "RootResourceId"
     ]
    },
    "PathPart": "validate",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/validate/Resource"
   }
  },
  "MilkMobsApivalidateOPTIONSB5EED471": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApivalidateFD68B44A"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/validate/OPTIONS/Resource"
   }
  },
  "MilkMobsApivalidatePOSTApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DPOSTvalidate3A485031": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ValidateVideoFn38264D58",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/POST/validate"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/validate/POST/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.POST..validate"
   }
  },
  "MilkMobsApivalidatePOSTApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DPOSTvalidate9444BDCE": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ValidateVideoFn38264D58",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/POST/validate"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/validate/POST/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.POST..validate"
   }
  },
  "MilkMobsApivalidatePOST5664FE5A": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ValidateVideoFn38264D58",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApivalidateFD68B44A"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/validate/POST/Resource"
   }
  },
  "MilkMobsApivalidatevideoId1D263AB4": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "MilkMobsApivalidateFD68B44A"
    },
    "PathPart": "{videoId}",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/validate/{videoId}/Resource"
   }
  },
  "MilkMobsApivalidatevideoIdOPTIONS7CF11721": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApivalidatevideoId1D263AB4"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/validate/{videoId}/OPTIONS/Resource"
   }
  },
  "MilkMobsApivalidatevideoIdGETApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DGETvalidatevideoId4C85ACC2": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ValidateVideoFn38264D58",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/GET/validate/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/validate/{videoId}/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..validate.{videoId}"
   }
  },
  "MilkMobsApivalidatevideoIdGETApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DGETvalidatevideoId253CCEAE": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ValidateVideoFn38264D58",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/GET/validate/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/validate/{videoId}/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..validate.{videoId}"
   }
  },
  "MilkMobsApivalidatevideoIdGET05A96543": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ValidateVideoFn38264D58",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApivalidatevideoId1D263AB4"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/validate/{videoId}/GET/Resource"
   }
  },
  "MilkMobsApiexecutionhistory5F21AD6E": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "MilkMobsApiB76DFE80",
      "RootResourceId"
     ]
    },
    "PathPart": "execution-history",
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/execution-history/Resource"
   }
  },
  "MilkMobsApiexecutionhistoryOPTIONSA631B4D5": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApiexecutionhistory5F21AD6E"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/execution-history/OPTIONS/Resource"
   }
  },
  "MilkMobsApiexecutionhistoryGETApiPermissionMilkMobsStackMilkMobsApi1ED7FB9DGETexecutionhistory0B6C3325": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetExecutionHistoryFnE73EB475",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/",
       {
        "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
       },
       "/GET/execution-history"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/execution-history/GET/ApiPermission.MilkMobsStackMilkMobsApi1ED7FB9D.GET..execution-history"
   }
  },
  "MilkMobsApiexecutionhistoryGETApiPermissionTestMilkMobsStackMilkMobsApi1ED7FB9DGETexecutionhistoryCA7A6252": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GetExecutionHistoryFnE73EB475",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:679729599398:",
       {
        "Ref": "MilkMobsApiB76DFE80"
       },
       "/test-invoke-stage/GET/execution-history"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/execution-history/GET/ApiPermission.Test.MilkMobsStackMilkMobsApi1ED7FB9D.GET..execution-history"
   }
  },
  "MilkMobsApiexecutionhistoryGET1758C3BD": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:us-east-1:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "GetExecutionHistoryFnE73EB475",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "MethodResponses": [
     {
      "StatusCode": "200"
     }
    ],
    "ResourceId": {
     "Ref": "MilkMobsApiexecutionhistory5F21AD6E"
    },
    "RestApiId": {
     "Ref": "MilkMobsApiB76DFE80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsApi/Default/execution-history/GET/Resource"
   }
  },
  "SearchSimilarFnServiceRoleFB263920": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/SearchSimilarFn/ServiceRole/Resource"
   }
  },
  "SearchSimilarFnServiceRoleDefaultPolicy5789A8B3": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "es:ESHttpGet",
        "es:ESHttpHead"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "VideoEmbeddingsDomain067A71F0",
             "Arn"
            ]
           },
           "/videos"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "VideoEmbeddingsDomain067A71F0",
             "Arn"
            ]
           },
           "/videos/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VideosTable19B3D0C4",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "SearchSimilarFnServiceRoleDefaultPolicy5789A8B3",
    "Roles": [
     {
      "Ref": "SearchSimilarFnServiceRoleFB263920"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/SearchSimilarFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "SearchSimilarFn25B2FAE1": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-679729599398-us-east-1",
     "S3Key": "6c34d00577af490ce201b0e287016ead8ad74560d1c436558befd294afddc678.zip"
    },
    "Environment": {
     "Variables": {
      "VIDEOS_TABLE_NAME": {
       "Ref": "VideosTable19B3D0C4"
      },
      "OPENSEARCH_ENDPOINT": {
       "Fn::GetAtt": [
        "VideoEmbeddingsDomain067A71F0",
        "DomainEndpoint"
       ]
      },
      "OPENSEARCH_INDEX_NAME": "videos"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "SearchSimilarFnServiceRoleFB263920",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "SearchSimilarFnServiceRoleDefaultPolicy5789A8B3",
    "SearchSimilarFnServiceRoleFB263920"
   ],
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/SearchSimilarFn/Resource",
    "aws:asset:path": "asset.6c34d00577af490ce201b0e287016ead8ad74560d1c436558befd294afddc678",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "MilkMobsDashboard03BF16C9": {
   "Type": "AWS::CloudWatch::Dashboard",
   "Properties": {
    "DashboardBody": {
     "Fn::Join": [
      "",
      [
       "{\"widgets\":[{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Analysis Lambda Invocations\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",
       {
        "Ref": "AnalysisMarkProcessingFn1DCE525A"
       },
       "\",{\"label\":\"",
       {
        "Ref": "AnalysisMarkProcessingFn1DCE525A"
       },
       "\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",
       {
        "Ref": "AnalysisPegasusFnA65D88A0"
       },
       "\",{\"label\":\"",
       {
        "Ref": "AnalysisPegasusFnA65D88A0"
       },
       "\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",
       {
        "Ref": "AnalysisMarengoFnE7B906B8"
       },
       "\",{\"label\":\"",
       {
        "Ref": "AnalysisMarengoFnE7B906B8"
       },
       "\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",
       {
        "Ref": "AnalysisWriteResultFnC2A76429"
       },
       "\",{\"label\":\"",
       {
        "Ref": "AnalysisWriteResultFnC2A76429"
       },
       "\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",
       {
        "Ref": "ClusterEmbeddingsFnF96ED85B"
       },
       "\",{\"label\":\"",
       {
        "Ref": "ClusterEmbeddingsFnF96ED85B"
       },
       "\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",
       {
        "Ref": "ValidateVideoFn38264D58"
       },
       "\",{\"label\":\"",
       {
        "Ref": "ValidateVideoFn38264D58"
       },
       "\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",
       {
        "Ref": "SearchSimilarFn25B2FAE1"
       },
       "\",{\"label\":\"",
       {
        "Ref": "SearchSimilarFn25B2FAE1"
       },
       "\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Analysis Lambda Errors\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",
       {
        "Ref": "AnalysisMarkProcessingFn1DCE525A"
       },
       "\",{\"label\":\"",
       {
        "Ref": "AnalysisMarkProcessingFn1DCE525A"
       },
       "\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",
       {
        "Ref": "AnalysisPegasusFnA65D88A0"
       },
       "\",{\"label\":\"",
       {
        "Ref": "AnalysisPegasusFnA65D88A0"
       },
       "\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",
       {
        "Ref": "AnalysisMarengoFnE7B906B8"
       },
       "\",{\"label\":\"",
       {
        "Ref": "AnalysisMarengoFnE7B906B8"
       },
       "\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",
       {
        "Ref": "AnalysisWriteResultFnC2A76429"
       },
       "\",{\"label\":\"",
       {
        "Ref": "AnalysisWriteResultFnC2A76429"
       },
       "\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",
       {
        "Ref": "ClusterEmbeddingsFnF96ED85B"
       },
       "\",{\"label\":\"",
       {
        "Ref": "ClusterEmbeddingsFnF96ED85B"
       },
       "\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",
       {
        "Ref": "ValidateVideoFn38264D58"
       },
       "\",{\"label\":\"",
       {
        "Ref": "ValidateVideoFn38264D58"
       },
       "\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",
       {
        "Ref": "SearchSimilarFn25B2FAE1"
       },
       "\",{\"label\":\"",
       {
        "Ref": "SearchSimilarFn25B2FAE1"
       },
       "\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":12,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Lambda Duration (ms)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",
       {
        "Ref": "AnalysisMarkProcessingFn1DCE525A"
       },
       "\",{\"label\":\"",
       {
        "Ref": "AnalysisMarkProcessingFn1DCE525A"
       },
       "\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",
       {
        "Ref": "AnalysisPegasusFnA65D88A0"
       },
       "\",{\"label\":\"",
       {
        "Ref": "AnalysisPegasusFnA65D88A0"
       },
       "\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",
       {
        "Ref": "AnalysisMarengoFnE7B906B8"
       },
       "\",{\"label\":\"",
       {
        "Ref": "AnalysisMarengoFnE7B906B8"
       },
       "\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",
       {
        "Ref": "AnalysisWriteResultFnC2A76429"
       },
       "\",{\"label\":\"",
       {
        "Ref": "AnalysisWriteResultFnC2A76429"
       },
       "\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",
       {
        "Ref": "ClusterEmbeddingsFnF96ED85B"
       },
       "\",{\"label\":\"",
       {
        "Ref": "ClusterEmbeddingsFnF96ED85B"
       },
       "\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",
       {
        "Ref": "ValidateVideoFn38264D58"
       },
       "\",{\"label\":\"",
       {
        "Ref": "ValidateVideoFn38264D58"
       },
       "\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",
       {
        "Ref": "SearchSimilarFn25B2FAE1"
       },
       "\",{\"label\":\"",
       {
        "Ref": "SearchSimilarFn25B2FAE1"
       },
       "\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":18,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Step Functions Executions\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/States\",\"ExecutionsStarted\",\"StateMachineArn\",\"",
       {
        "Ref": "VideoAnalysisStateMachineA7892CAE"
       },
       "\",{\"label\":\"Total\",\"stat\":\"Sum\"}],[\"AWS/States\",\"ExecutionsFailed\",\"StateMachineArn\",\"",
       {
        "Ref": "VideoAnalysisStateMachineA7892CAE"
       },
       "\",{\"label\":\"Failed\",\"stat\":\"Sum\"}],[\"AWS/States\",\"ExecutionsSucceeded\",\"StateMachineArn\",\"",
       {
        "Ref": "VideoAnalysisStateMachineA7892CAE"
       },
       "\",{\"label\":\"Succeeded\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":24,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Step Functions Execution Time\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/States\",\"ExecutionTime\",\"StateMachineArn\",\"",
       {
        "Ref": "VideoAnalysisStateMachineA7892CAE"
       },
       "\",{\"label\":\"Avg Execution Time\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":30,\"properties\":{\"view\":\"timeSeries\",\"title\":\"DynamoDB Read/Write Capacity\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/DynamoDB\",\"ConsumedReadCapacityUnits\",\"TableName\",\"",
       {
        "Ref": "VideosTable19B3D0C4"
       },
       "\",{\"label\":\"Videos Read\",\"stat\":\"Sum\"}],[\"AWS/DynamoDB\",\"ConsumedWriteCapacityUnits\",\"TableName\",\"",
       {
        "Ref": "VideosTable19B3D0C4"
       },
       "\",{\"label\":\"Videos Write\",\"stat\":\"Sum\"}],[\"AWS/DynamoDB\",\"ConsumedReadCapacityUnits\",\"TableName\",\"",
       {
        "Ref": "MobsTableC49D34D5"
       },
       "\",{\"label\":\"Mobs Read\",\"stat\":\"Sum\"}],[\"AWS/DynamoDB\",\"ConsumedWriteCapacityUnits\",\"TableName\",\"",
       {
        "Ref": "MobsTableC49D34D5"
       },
       "\",{\"label\":\"Mobs Write\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":36,\"properties\":{\"view\":\"timeSeries\",\"title\":\"S3 Bucket Size\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/S3\",\"BucketSizeBytes\",\"BucketName\",\"",
       {
        "Ref": "UploadsBucket5E5E9B64"
       },
       "\",\"StorageType\",\"StandardStorage\",{\"label\":\"Uploads Bucket Size\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":42,\"properties\":{\"view\":\"timeSeries\",\"title\":\"API Gateway Requests\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"AWS/ApiGateway\",\"Count\",\"ApiName\",\"Milk Mobs API\",{\"label\":\"Total Requests\",\"stat\":\"Sum\"}],[\"AWS/ApiGateway\",\"4XXError\",\"ApiName\",\"Milk Mobs API\",{\"label\":\"4XX Errors\",\"stat\":\"Sum\"}],[\"AWS/ApiGateway\",\"5XXError\",\"ApiName\",\"Milk Mobs API\",{\"label\":\"5XX Errors\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":48,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Bedrock Usage (TwelveLabs)\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"MilkMobs/Bedrock\",\"BedrockInvocations\",\"ModelType\",\"Pegasus\",{\"label\":\"Pegasus Invocations\",\"stat\":\"Sum\"}],[\"MilkMobs/Bedrock\",\"BedrockInvocations\",\"ModelType\",\"Marengo\",{\"label\":\"Marengo Invocations\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":54,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Bedrock Token Usage\",\"region\":\"",
       {
        "Ref": "AWS::Region"
       },
       "\",\"metrics\":[[\"MilkMobs/Bedrock\",\"BedrockInputTokens\",\"ModelType\",\"Pegasus\",{\"label\":\"Pegasus Input Tokens\",\"stat\":\"Sum\"}],[\"MilkMobs/Bedrock\",\"BedrockOutputTokens\",\"ModelType\",\"Pegasus\",{\"label\":\"Pegasus Output Tokens\",\"stat\":\"Sum\"}],[\"MilkMobs/Bedrock\",\"BedrockInputTokens\",\"ModelType\",\"Marengo\",{\"label\":\"Marengo Input Tokens\",\"stat\":\"Sum\"}],[\"MilkMobs/Bedrock\",\"BedrockOutputTokens\",\"ModelType\",\"Marengo\",{\"label\":\"Marengo Output Tokens\",\"stat\":\"Sum\"}]],\"yAxis\":{}}}]}"
      ]
     ]
    },
    "DashboardName": "MilkMobsSystemHealth"
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/MilkMobsDashboard/Resource"
   }
  },
  "StepFunctionsHighFailureRateB2011F73": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "Step Functions failure rate exceeds 5%",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "EvaluationPeriods": 1,
    "Metrics": [
     {
      "Expression": "(failed / started) * 100",
      "Id": "expr_1",
      "ReturnData": true
     },
     {
      "Id": "failed",
      "MetricStat": {
       "Metric": {
        "Dimensions": [
         {
          "Name": "StateMachineArn",
          "Value": {
           "Ref": "VideoAnalysisStateMachineA7892CAE"
          }
         }
        ],
        "MetricName": "ExecutionsFailed",
        "Namespace": "AWS/States"
       },
       "Period": 300,
       "Stat": "Sum"
      },
      "ReturnData": false
     },
     {
      "Id": "started",
      "MetricStat": {
       "Metric": {
        "Dimensions": [
         {
          "Name": "StateMachineArn",
          "Value": {
           "Ref": "VideoAnalysisStateMachineA7892CAE"
          }
         }
        ],
        "MetricName": "ExecutionsStarted",
        "Namespace": "AWS/States"
       },
       "Period": 300,
       "Stat": "Sum"
      },
      "ReturnData": false
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Threshold": 5,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/StepFunctionsHighFailureRate/Resource"
   }
  },
  "LambdaHighErrorRate26C3D952": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "Lambda error rate exceeds 10%",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "EvaluationPeriods": 1,
    "Metrics": [
     {
      "Expression": "(errors / invocations) * 100",
      "Id": "expr_1",
      "ReturnData": true
     },
     {
      "Id": "errors",
      "MetricStat": {
       "Metric": {
        "MetricName": "Errors",
        "Namespace": "AWS/Lambda"
       },
       "Period": 300,
       "Stat": "Sum"
      },
      "ReturnData": false
     },
     {
      "Id": "invocations",
      "MetricStat": {
       "Metric": {
        "MetricName": "Invocations",
        "Namespace": "AWS/Lambda"
       },
       "Period": 300,
       "Stat": "Sum"
      },
      "ReturnData": false
     }
    ],
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Threshold": 10,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/LambdaHighErrorRate/Resource"
   }
  },
  "AnalysisPegasusErrorsF42DD8C0": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "Analysis Pegasus Lambda has errors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Ref": "AnalysisPegasusFnA65D88A0"
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "Errors",
    "Namespace": "AWS/Lambda",
    "Period": 300,
    "Statistic": "Sum",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Threshold": 3,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisPegasusErrors/Resource"
   }
  },
  "AnalysisMarengoErrors197B2B88": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmDescription": "Analysis Marengo Lambda has errors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Ref": "AnalysisMarengoFnE7B906B8"
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "Errors",
    "Namespace": "AWS/Lambda",
    "Period": 300,
    "Statistic": "Sum",
    "Tags": [
     {
      "Key": "Application",
      "Value": "MilkMobs"
     },
     {
      "Key": "CostCenter",
      "Value": "Marketing"
     },
     {
      "Key": "Environment",
      "Value": "prod"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     }
    ],
    "Threshold": 3,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/AnalysisMarengoErrors/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/21S247iMAz9lnkPWRb2BwrsSCPNpYLVviI3NSXQJlXsgFCUf18lLRSN9snn+HLsOF7IxXIu5y9wpZmqz7NWVzLsGNRZwJX2gZYyrLw6I4v1wYxoMKVttbpN7pEPZAWEUbTQVTXIsD6YEl2nibQ1YqdN0yJb8+qN4uR5gPVhcr7DDd1fdDQGnnkUqrW+PjhrWIYvpxttCqWQ6K1Gw5rzXOuU85py/pux0cROV/7e+ZlHUd8MdLauZPgDVYspIYMobI+GEJw6ErqLVijDxnagB5GMotDQyTCtaERbOyglGwUt90CETLJIZlzX3tgaTyQ/s3msAy9omGT4nezKU5J54K0fdX3WZewPYx3tGehMMrxn8TdzsWcUQ6HTdYOl58zoW50MJThoW2xFCURix8D4AeqoTW71zKOAXjfAeIWbDFskLnqd55lgoZT1hsUG+9beOjT5op7YjqG5KzcotkjWO4XpksQH8tHWKTiie3RskvF4FFdgdZRhA3SsLLhcNZGiBdfleRKI8VlgUlWe2HZ7N3KSobjSOjsfOaWzF12ji+JbIH9meoQ2TZL/8tx7jiL9qzzRj8tiLn/+kvOXE2k9c96w7lBuB/sPpB0/HJEDAAA="
   },
   "Metadata": {
    "aws:cdk:path": "MilkMobsStack/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "MilkMobsApiEndpointD58CC9BB": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "MilkMobsApiB76DFE80"
      },
      ".execute-api.us-east-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
      },
      "/"
     ]
    ]
   }
  },
  "ApiBaseUrl": {
   "Description": "Base URL for Milk Mobs API Gateway",
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "MilkMobsApiB76DFE80"
      },
      ".execute-api.us-east-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "MilkMobsApiDeploymentStageprod1C57746E"
      },
      "/"
     ]
    ]
   },
   "Export": {
    "Name": "MilkMobsApiBaseUrl"
   }
  },
  "UploadsBucketName": {
   "Description": "S3 bucket name for video uploads",
   "Value": {
    "Ref": "UploadsBucket5E5E9B64"
   },
   "Export": {
    "Name": "MilkMobsUploadsBucketName"
   }
  },
  "VideosTableName": {
   "Description": "DynamoDB table name for video metadata",
   "Value": {
    "Ref": "VideosTable19B3D0C4"
   },
   "Export": {
    "Name": "MilkMobsVideosTableName"
   }
  },
  "MobsTableName": {
   "Description": "DynamoDB table name for mob clusters",
   "Value": {
    "Ref": "MobsTableC49D34D5"
   },
   "Export": {
    "Name": "MilkMobsMobsTableName"
   }
  },
  "StateMachineArn": {
   "Description": "Step Functions state machine ARN for video analysis",
   "Value": {
    "Ref": "VideoAnalysisStateMachineA7892CAE"
   },
   "Export": {
    "Name": "MilkMobsStateMachineArn"
   }
  },
  "EventBusName": {
   "Description": "EventBridge bus name for video analysis events",
   "Value": {
    "Ref": "MilkMobsEventBus5827410E"
   },
   "Export": {
    "Name": "MilkMobsEventBusName"
   }
  },
  "CloudFrontDistributionDomain": {
   "Description": "CloudFront distribution domain for video delivery",
   "Value": {
    "Fn::GetAtt": [
     "VideoDistribution93465BBB",
     "DomainName"
    ]
   },
   "Export": {
    "Name": "MilkMobsCloudFrontDomain"
   }
  },
  "CloudFrontDistributionId": {
   "Description": "CloudFront distribution ID",
   "Value": {
    "Ref": "VideoDistribution93465BBB"
   },
   "Export": {
    "Name": "MilkMobsCloudFrontId"
   }
  },
  "OpenSearchEndpoint": {
   "Description": "OpenSearch domain endpoint for vector search",
   "Value": {
    "Fn::GetAtt": [
     "VideoEmbeddingsDomain067A71F0",
     "DomainEndpoint"
    ]
   },
   "Export": {
    "Name": "MilkMobsOpenSearchEndpoint"
   }
  },
  "DashboardUrl": {
   "Description": "CloudWatch Dashboard URL",
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "AWS::Region"
      },
      ".console.aws.amazon.com/cloudwatch/home?region=",
      {
       "Ref": "AWS::Region"
      },
      "#dashboards:name=",
      {
       "Ref": "MilkMobsDashboard03BF16C9"
      }
     ]
    ]
   },
   "Export": {
    "Name": "MilkMobsDashboardUrl"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}